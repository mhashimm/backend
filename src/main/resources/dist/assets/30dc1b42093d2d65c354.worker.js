!function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="/assets/",n(0)}([function(t,n,e){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var r=e(2),i=n(r),o=e(3),a=n(o);t.onmessage=function(t){var n=t.data.user,e=(0,a["default"])(n);e.open(),Promise.all(["courses","departments","faculties","programs"].map(function(t){return e[t].orderBy("ts").last().then(function(t){return void 0===t||void 0===t.ts?0:t.ts})})).then(function(t){fetch(i["default"].apiUrl+i["default"].admin.path.get+("?facultyts="+t[2]+"&departmentts="+t[1]+"&coursets="+t[0]+"&programts="+t[3]),{method:"GET",mode:i["default"].cors,headers:new Headers({Authorization:"Bearer "+n.token})}).then(function(t){return 200==t.status?t.json():void 0}).then(function(t){Object.keys(t).map(function(n){t[n].map(function(t){var r=e[n],i=e[n+"Orig"];e.transaction("rw",r,i,function(){r["delete"](t.id),r.add(t),i["delete"](t.id)})})})})})}}).call(n,function(){return this}())},function(t,n,e){(function(t,r){function i(t,n){this._id=t,this._clearFn=n}var o=e(6).nextTick,a=Function.prototype.apply,u=Array.prototype.slice,s={},c=0;n.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;n>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},n))},n.setImmediate="function"==typeof t?t:function(t){var e=c++,r=arguments.length<2?!1:u.call(arguments,1);return s[e]=!0,o(function(){s[e]&&(r?t.apply(null,r):t.call(null),n.clearImmediate(e))}),e},n.clearImmediate="function"==typeof r?r:function(t){delete s[t]}}).call(n,e(1).setImmediate,e(1).clearImmediate)},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=e(4),o=r(i),a={appEnv:"dist",apiUrl:"http://localhost:8888/api",keycloak:{url:"http://localhost:8080/auth",realm:"sisdn-realm",clientId:"sisdn",redirect_uri:"http://localhost:8000/login",flow:"standard"}};t.exports=Object.freeze(Object.assign({},o["default"],a))},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function o(t){var n=c["default"].db.version,e=new u["default"](t.username+"@sisdn-"+n),r={};if(t.groups&&t.groups.indexOf("admin")>-1){var o=!0,a=!1,s=void 0;try{for(var f,l=c["default"].admin.db[Symbol.iterator]();!(o=(f=l.next()).done);o=!0){var h=f.value;Object.assign(r,i({},h.name,h.schema),i({},h.name+"Orig",h.schema))}}catch(d){a=!0,s=d}finally{try{!o&&l["return"]&&l["return"]()}finally{if(a)throw s}}}return e.version(n).stores(r),e}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o;var a=e(5),u=r(a),s=e(2),c=r(s)},function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e={name:"faculties",schema:"id, title, titleTr, isActive, status, ts"},r={name:"departments",schema:"id, title, titleTr, isActive, status, ts"},i={name:"courses",schema:"id, title, titleTr, facultyId, departmentId, remarks, isActive, status, ts"},o={name:"programs",schema:"id, title, titleTr, facultyId, terms, creditHours, isActive, status, ts"};n["default"]={onlineCheckInterval:1e4,entityUpdateInterval:1e4,url:"http://localhost:8888",cors:"cors",db:{name:"sisdndb",version:"1"},admin:{db:[e,r,i,o],path:{get:"/admin"},faculties:{path:{post:"/admin/faculties",put:"/admin/faculties",get:"/admin/faculties"}},departments:{path:{post:"/admin/departments",put:"/admin/departments",get:"/admin/departments"}},courses:{path:{post:"/admin/courses",put:"/admin/courses",get:"/admin/courses"}},programs:{path:{post:"/admin/programs",put:"/admin/programs",get:"/admin/programs"}}}}},function(t,n,e){var r;(function(i){(function(t,n,e){"use strict";function r(t,n){return"object"!=typeof n&&(n=n()),Object.keys(n).forEach(function(e){t[e]=n[e]}),t}function o(t){return{from:function(n){return t.prototype=Object.create(n.prototype),t.prototype.constructor=t,{extend:function(e){r(t.prototype,"object"!=typeof e?e(n.prototype):e)}}}}}function a(t,n){return n(t)}function u(t,n){function i(){Dt.on("versionchange",function(t){Dt.close(),Dt.on("error").fire(new pt("Database version changed by other database connection."))})}function l(t){this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function p(t,n,e,r){if(0===t){Object.keys(mt).forEach(function(t){w(n,t,mt[t].primKey,mt[t].indexes)});var i=Dt._createTransaction(St,vt,mt);i.idbtrans=n,i.idbtrans.onerror=E(e,["populating database"]),i.on("error").subscribe(e),R.newPSD(function(){R.PSD.trans=i;try{Dt.on("populate").fire(i)}catch(t){r.onerror=n.onerror=function(t){t.preventDefault()};try{n.abort()}catch(o){}n.db.close(),e(t)}})}else{var o=[],u=yt.filter(function(n){return n._cfg.version===t})[0];if(!u)throw new pt("Dexie specification of currently installed DB version is missing");mt=Dt._dbSchema=u._cfg.dbschema;var s=!1,c=yt.filter(function(n){return n._cfg.version>t});c.forEach(function(t){var r=mt,i=t._cfg.dbschema;st(r,n),st(i,n),mt=Dt._dbSchema=i;var u=b(r,i);u.add.forEach(function(t){o.push(function(n,e){w(n,t[0],t[1].primKey,t[1].indexes),e()})}),u.change.forEach(function(t){if(t.recreate)throw new pt("Not yet support for changing primary key");o.push(function(n,e){var r=n.objectStore(t.name);t.add.forEach(function(t){L(r,t)}),t.change.forEach(function(t){r.deleteIndex(t.name),L(r,t)}),t.del.forEach(function(t){r.deleteIndex(t)}),e()})}),t._cfg.contentUpgrade&&o.push(function(n,r){s=!0;var o=Dt._createTransaction(St,[].slice.call(n.db.objectStoreNames,0),i);o.idbtrans=n;var u=0;o._promise=a(o._promise,function(t){return function(n,e,i){function o(t){return function(){t.apply(this,arguments),0===--u&&r()}}return++u,t.call(this,n,function(t,n,r){arguments[0]=o(t),arguments[1]=o(n),e.apply(this,arguments)},i)}}),n.onerror=E(e,["running upgrader function for version",t._cfg.version]),o.on("error").subscribe(e),t._cfg.contentUpgrade(o),0===u&&r()}),s&&at()||o.push(function(t,n){j(i,t),n()})});var f=function(){try{o.length?o.shift()(n,f):S(mt,n)}catch(t){r.onerror=n.onerror=function(t){t.preventDefault()};try{n.abort()}catch(i){}n.db.close(),e(t)}};f()}}function b(t,n){var e={del:[],add:[],change:[]};for(var r in t)n[r]||e.del.push(r);for(var r in n){var i=t[r],o=n[r];if(i){var a={name:r,def:n[r],recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)a.recreate=!0,e.change.push(a);else{var u=i.indexes.reduce(function(t,n){return t[n.name]=n,t},{}),s=o.indexes.reduce(function(t,n){return t[n.name]=n,t},{});for(var c in u)s[c]||a.del.push(c);for(var c in s){var f=u[c],l=s[c];f?f.src!==l.src&&a.change.push(l):a.add.push(l)}(a.recreate||a.del.length>0||a.add.length>0||a.change.length>0)&&e.change.push(a)}}else e.add.push([r,o])}return e}function w(t,n,e,r){var i=t.db.createObjectStore(n,e.keyPath?{keyPath:e.keyPath,autoIncrement:e.auto}:{autoIncrement:e.auto});return r.forEach(function(t){L(i,t)}),i}function S(t,n){Object.keys(t).forEach(function(e){n.db.objectStoreNames.contains(e)||w(n,e,t[e].primKey,t[e].indexes)})}function j(t,n){for(var r=0;r<n.db.objectStoreNames.length;++r){var i=n.db.objectStoreNames[r];(null===t[i]||t[i]===e)&&n.db.deleteObjectStore(i)}}function L(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function z(t,n){throw new pt("Table "+n[0]+" not part of transaction. Original Scope Function Source: "+u.Promise.PSD.trans.scopeFunc.toString())}function H(t,n,e,r){this.name=t,this.schema=e,this.hook=gt[t]?gt[t].hook:g(null,{creating:[h,s],reading:[f,c],updating:[d,s],deleting:[y,s]}),this._tpf=n,this._collClass=r||Y}function J(t,n,e,r){H.call(this,t,n,e,r||Q)}function V(t,n,e,r){function i(t,n,e,r){return o._promise(t,e,r)}var o=this;this.db=Dt,this.mode=t,this.storeNames=n,this.idbtrans=null,this.on=g(this,["complete","error"],"abort"),this._reculock=0,this._blockedFuncs=[],this._psd=null,this.active=!0,this._dbschema=e,r&&(this.parent=r),this._tpf=i,this.tables=Object.create(bt);for(var a=n.length-1;-1!==a;--a){var u=n[a],s=Dt._tableFactory(t,e[u],i);this.tables[u]=s,this[u]||(this[u]=s)}}function G(t,n,e){this._ctx={table:t,index:":id"===n?null:n,collClass:t._collClass,or:e}}function Y(t,n){var e=null,r=null;if(n)try{e=n()}catch(i){r=i}var o=t._ctx;this._ctx={table:o.table,index:o.index,isPrimKey:!o.index||o.table.schema.primKey.keyPath&&o.index===o.table.schema.primKey.name,range:e,op:"openCursor",dir:"next",unique:"",algorithm:null,filter:null,isMatch:null,offset:0,limit:1/0,error:r,or:o.or}}function Q(){Y.apply(this,arguments)}function X(t,n){return t._cfg.version-n._cfg.version}function Z(t,n,e,r,i,o){e.forEach(function(e){var a=Dt._tableFactory(r,i[e],n);t.forEach(function(t){t[e]||(o?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){var t=R.PSD&&R.PSD.trans;return t&&t.db===Dt?t.tables[e]:a}}):t[e]=a)})})}function $(t){t.forEach(function(t){for(var n in t)t[n]instanceof H&&delete t[n]})}function tt(t,n,e,r,i,o){var a=R.PSD;o=o||c,t.onerror||(t.onerror=E(i)),n?t.onsuccess=x(function(a){var u=t.result;if(u){var s=function(){u["continue"]()};n(u,function(t){s=t},r,i)&&e(o(u.value),u,function(t){s=t}),s()}else r()},i,a):t.onsuccess=x(function(n){var i=t.result;if(i){var a=function(){i["continue"]()};e(o(i.value),i,function(t){a=t}),a()}else r()},i,a)}function nt(t){var n=[];return t.split(",").forEach(function(t){t=t.trim();var e=t.replace("&","").replace("++","").replace("*",""),r=0!==e.indexOf("[")?e:t.substring(t.indexOf("[")+1,t.indexOf("]")).split("+");n.push(new B(e,r||null,-1!==t.indexOf("&"),-1!==t.indexOf("*"),-1!==t.indexOf("++"),Array.isArray(r),-1!==r.indexOf(".")))}),n}function et(t,n){return n>t?-1:t>n?1:0}function rt(t,n){return n>t?1:t>n?-1:0}function it(t){return function(n,e){for(var r=0;;){var i=t(n[r],e[r]);if(0!==i)return i;if(++r,r===n.length||r===e.length)return t(n.length,e.length)}}}function ot(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}function at(){return navigator.userAgent.indexOf("Trident")>=0||navigator.userAgent.indexOf("MSIE")>=0}function ut(){if(Dt.verno=_t.version/10,Dt._dbSchema=mt={},vt=[].slice.call(_t.objectStoreNames,0),0!==vt.length){var t=_t.transaction(M(vt),"readonly");vt.forEach(function(n){for(var e=t.objectStore(n),r=e.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new B(r,r||"",!1,!1,!!e.autoIncrement,r&&"string"!=typeof r,i),a=[],u=0;u<e.indexNames.length;++u){var s=e.index(e.indexNames[u]);r=s.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf(".");var c=new B(s.name,r,!!s.unique,!!s.multiEntry,!1,r&&"string"!=typeof r,i);a.push(c)}mt[n]=new N(n,o,a,{})}),Z([gt],Dt._transPromiseFactory,Object.keys(mt),St,mt)}}function st(t,n){for(var e=n.db.objectStoreNames,r=0;r<e.length;++r)for(var i=e[r],o=n.objectStore(i),a=0;a<o.indexNames.length;++a){var u=o.indexNames[a],s=o.index(u).keyPath,c="string"==typeof s?s:"["+[].slice.call(s).join("+")+"]";if(t[i]){var f=t[i].idxByName[c];f&&(f.name=u)}}}var ct=n&&n.addons||u.addons,ft=u.dependencies,lt=ft.indexedDB,ht=ft.IDBKeyRange,dt=(ft.IDBTransaction,ft.DOMError,ft.TypeError),pt=ft.Error,mt=this._dbSchema={},yt=[],vt=[],gt={},bt={},_t=null,wt=!0,xt=null,kt=!1,Pt="readonly",St="readwrite",Dt=this,Ot=[],Tt=!0,jt=!!q();this.version=function(t){if(_t)throw new pt("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=yt.filter(function(n){return n._cfg.version===t})[0];return n?n:(n=new l(t),yt.push(n),yt.sort(X),n)},r(l.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,t):t;var n={};yt.forEach(function(t){r(n,t._cfg.storesSource)});var e=this._cfg.dbschema={};return this._parseStoresSpec(n,e),mt=Dt._dbSchema=e,$([gt,Dt,bt]),Z([bt],z,Object.keys(e),St,e),Z([gt,Dt,this._cfg.tables],Dt._transPromiseFactory,Object.keys(e),St,e,!0),vt=Object.keys(e),this},upgrade:function(t){var n=this;return U(function(){t(Dt._createTransaction(St,Object.keys(n._cfg.dbschema),n._cfg.dbschema))}),this._cfg.contentUpgrade=t,this},_parseStoresSpec:function(t,n){Object.keys(t).forEach(function(e){if(null!==t[e]){var r={},i=nt(t[e]),o=i.shift();if(o.multi)throw new pt("Primary key cannot be multi-valued");o.keyPath&&P(r,o.keyPath,o.auto?0:o.keyPath),i.forEach(function(t){if(t.auto)throw new pt("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new pt("Index must have a name and cannot be an empty string");P(r,t.keyPath,t.compound?t.keyPath.map(function(){return""}):"")}),n[e]=new N(e,o,i,r)}})}}),this._allTables=gt,this._tableFactory=function(t,n,e){return t===Pt?new H(n.name,e,n,Y):new J(n.name,e,n)},this._createTransaction=function(t,n,e,r){return new V(t,n,e,r)},this._transPromiseFactory=function(t,n,e){if(!wt||R.PSD&&R.PSD.letThrough){var r=Dt._createTransaction(t,n,mt);return r._promise(t,function(t,n){r.error(function(t){Dt.on("error").fire(t)}),e(function(n){r.complete(function(){t(n)})},n,r)})}var i=new R(function(r,o){Ot.push({resume:function(){var a=Dt._transPromiseFactory(t,n,e);i.onuncatched=a.onuncatched,a.then(r,o)}})});return i},this._whenReady=function(t){return new R(W||!wt||R.PSD&&R.PSD.letThrough?t:function(n,e){Ot.push({resume:function(){t(n,e)}})})},this.verno=0,this.open=function(){return new R(function(n,e){function r(t){try{i.transaction.abort()}catch(n){}kt=!1,xt=t,wt=!1,e(xt),Ot.forEach(function(t){t.resume()}),Ot=[]}if(W&&n(Dt),_t||kt)throw new pt("Database already opened or being opened");var i,o=!1;try{if(xt=null,kt=!0,yt.length>0&&(Tt=!1),!lt)throw new pt("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using Safari, make sure to include indexedDB polyfill.");if(i=Tt?lt.open(t):lt.open(t,Math.round(10*Dt.verno)),!i)throw new pt("IndexedDB API not available");i.onerror=E(r,["opening database",t]),i.onblocked=function(t){Dt.on("blocked").fire(t)},i.onupgradeneeded=x(function(n){if(Tt&&!Dt._allowEmptyDB){i.onerror=function(t){t.preventDefault()},i.transaction.abort(),i.result.close();var e=lt.deleteDatabase(t);e.onsuccess=e.onerror=function(){r(new pt("Database '"+t+"' doesnt exist"))}}else{0===n.oldVersion&&(o=!0),i.transaction.onerror=E(r);var a=n.oldVersion>Math.pow(2,62)?0:n.oldVersion;p(a/10,i.transaction,r,i)}},r),i.onsuccess=x(function(e){kt=!1,_t=i.result,Tt?ut():_t.objectStoreNames.length>0&&st(mt,_t.transaction(M(_t.objectStoreNames),Pt)),_t.onversionchange=Dt.on("versionchange").fire,jt||K(function(n){return-1===n.indexOf(t)?n.push(t):void 0}),R.newPSD(function(){function t(){wt=!1,Ot.forEach(function(t){t.resume()}),Ot=[],n(Dt)}R.PSD.letThrough=!0;try{var e=Dt.on.ready.fire();e&&"function"==typeof e.then?e.then(t,function(t){_t.close(),_t=null,r(t)}):_(t)}catch(i){r(i)}})},r)}catch(a){r(a)}})},this.close=function(){_t&&(_t.close(),_t=null,wt=!0,xt=null)},this["delete"]=function(){var n=arguments;return new R(function(e,r){function i(){Dt.close();var n=lt.deleteDatabase(t);n.onsuccess=function(){jt||K(function(n){var e=n.indexOf(t);return e>=0?n.splice(e,1):void 0}),e()},n.onerror=E(r,["deleting",t]),n.onblocked=function(){Dt.on("blocked").fire()}}if(n.length>0)throw new pt("Arguments not allowed in db.delete()");kt?Ot.push({resume:i}):i()})},this.backendDB=function(){return _t},this.isOpen=function(){return null!==_t},this.hasFailed=function(){return null!==xt},this.dynamicallyOpened=function(){return Tt},this.name=t,Object.defineProperty(this,"tables",{get:function(){return Object.keys(gt).map(function(t){return gt[t]})}}),this.on=g(this,"error","populate","blocked",{ready:[v,s],versionchange:[m,s]}),this.on.ready.subscribe=a(this.on.ready.subscribe,function(t){return function(n,e){function r(){return e||Dt.on.ready.unsubscribe(r),n.apply(this,arguments)}t.call(this,r),Dt.isOpen()&&(wt?Ot.push({resume:r}):r())}}),U(function(){Dt.on("populate").fire(Dt._createTransaction(St,vt,mt)),Dt.on("error").fire(new pt)}),this.transaction=function(t,n,e){function r(n,r){var o=null;try{if(s)throw s;o=Dt._createTransaction(t,c,mt,i);var u=c.map(function(t){return o.tables[t]});u.push(o);var f,l=0;R.newPSD(function(){R.PSD.trans=o,o.scopeFunc=e,i&&(o.idbtrans=i.idbtrans,o._promise=a(o._promise,function(t){return function(n,e,r){function i(t){return function(n){var e;return R._rootExec(function(){e=t(n),R._tickFinalize(function(){0===--l&&o.active&&(o.active=!1,o.on.complete.fire())})}),e}}return++l,t.call(this,n,function(t,n,r){return e(i(t),i(n),r)},r)}})),o.complete(function(){n(f)}),o.error(function(t){o.idbtrans&&(o.idbtrans.onerror=A);try{o.abort()}catch(n){}i&&(i.active=!1,i.on.error.fire(t));var e=r(t);i||e||Dt.on.error.fire(t)}),R._rootExec(function(){f=e.apply(o,u)})}),(!o.idbtrans||i&&0===l)&&o._nop()}catch(h){o&&o.idbtrans&&(o.idbtrans.onerror=A),o&&o.abort(),i&&i.on.error.fire(h),_(function(){r(h)||Dt.on("error").fire(h)})}}n=[].slice.call(arguments,1,arguments.length-1),e=arguments[arguments.length-1];var i=R.PSD&&R.PSD.trans;i&&i.db===Dt&&-1===t.indexOf("!")||(i=null);var o=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");var u=Array.isArray(n[0])?n.reduce(function(t,n){return t.concat(n)}):n,s=null,c=u.map(function(t){return"string"==typeof t?t:(t instanceof H||(s=s||new dt("Invalid type. Arguments following mode must be instances of Table or String")),t.name)});return"r"==t||t==Pt?t=Pt:"rw"==t||t==St?t=St:s=new pt("Invalid transaction mode: "+t),i&&(s||(i&&i.mode===Pt&&t===St&&(o?i=null:s=s||new pt("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY")),i&&c.forEach(function(t){i.tables.hasOwnProperty(t)||(o?i=null:s=s||new pt("Table "+t+" not included in parent transaction. Parent Transaction function: "+i.scopeFunc.toString()))}))),i?i._promise(t,r,"lock"):Dt._whenReady(r)},this.table=function(t){if(W&&Tt)return new J(t);if(!gt.hasOwnProperty(t))throw new pt("Table does not exist");return gt[t]},r(H.prototype,function(){function t(){throw new pt("Current Transaction is READONLY")}return{_trans:function(t,n,e){return this._tpf(t,[this.name],n,e)},_idbstore:function(t,n,e){if(W)return new R(n);var r=this;return this._tpf(t,[this.name],function(t,e,i){n(t,e,i.idbtrans.objectStore(r.name),i)},e)},get:function(t,n){var e=this;return this._idbstore(Pt,function(n,r,i){W&&n(e.schema.instanceTemplate);var o=i.get(t);o.onerror=E(r,["getting",t,"from",e.name]),o.onsuccess=function(){n(e.hook.reading.fire(o.result))}}).then(n)},where:function(t){return new G(this,t)},count:function(t){return this.toCollection().count(t)},offset:function(t){return this.toCollection().offset(t)},limit:function(t){return this.toCollection().limit(t)},reverse:function(){return this.toCollection().reverse()},filter:function(t){return this.toCollection().and(t)},each:function(t){var n=this;return W&&t(n.schema.instanceTemplate),this._idbstore(Pt,function(e,r,i){var o=i.openCursor();o.onerror=E(r,["calling","Table.each()","on",n.name]),tt(o,null,t,e,r,n.hook.reading.fire)})},toArray:function(t){var n=this;return this._idbstore(Pt,function(t,e,r){W&&t([n.schema.instanceTemplate]);var i=[],o=r.openCursor();o.onerror=E(e,["calling","Table.toArray()","on",n.name]),tt(o,null,function(t){i.push(t)},function(){t(i)},e,n.hook.reading.fire)}).then(t)},orderBy:function(t){return new this._collClass(new G(this,t))},toCollection:function(){return new this._collClass(new G(this))},mapToClass:function(t,n){this.schema.mappedClass=t;var e=Object.create(t.prototype);n&&C(e,n),this.schema.instanceTemplate=e;var r=function(n){if(!n)return n;var e=Object.create(t.prototype);for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),t},defineClass:function(t){return this.mapToClass(u.defineClass(t),t)},add:t,put:t,"delete":t,clear:t,update:t}}),o(J).from(H).extend(function(){return{add:function(t,n){var r=this,i=this.hook.creating.fire;return this._idbstore(St,function(o,a,u,c){var f={};if(i!==s){var l=n||(u.keyPath?k(t,u.keyPath):e),h=i.call(f,l,t,c);l===e&&h!==e&&(u.keyPath?P(t,u.keyPath,h):n=h)}var d=n?u.add(t,n):u.add(t);d.onerror=E(function(t){return f.onerror&&f.onerror(t),a(t)},["adding",t,"into",r.name]),d.onsuccess=function(n){var e=u.keyPath;e&&P(t,e,n.target.result),f.onsuccess&&f.onsuccess(n.target.result),o(d.result)}})},put:function(t,n){var r=this,i=this.hook.creating.fire,o=this.hook.updating.fire;return i!==s||o!==s?this._trans(St,function(i,o,a){var u=n||r.schema.primKey.keyPath&&k(t,r.schema.primKey.keyPath);u===e?a.tables[r.name].add(t).then(i,o):(a._lock(),t=O(t),a.tables[r.name].where(":id").equals(u).modify(function(n){this.value=t}).then(function(e){return 0===e?a.tables[r.name].add(t,n):u})["finally"](function(){a._unlock()}).then(i,o))}):this._idbstore(St,function(e,i,o){var a=n?o.put(t,n):o.put(t);a.onerror=E(i,["putting",t,"into",r.name]),a.onsuccess=function(n){var r=o.keyPath;r&&P(t,r,n.target.result),e(a.result)}})},"delete":function(t){return this.hook.deleting.subscribers.length?this.where(":id").equals(t)["delete"]():this._idbstore(St,function(n,e,r){var i=r["delete"](t);i.onerror=E(e,["deleting",t,"from",r.name]),i.onsuccess=function(t){n(i.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection()["delete"]():this._idbstore(St,function(t,n,e){var r=e.clear();r.onerror=E(n,["clearing",e.name]),r.onsuccess=function(n){t(r.result)}})},update:function(t,n){if("object"!=typeof n||Array.isArray(n))throw new pt("db.update(keyOrObject, modifications). modifications must be an object.");if("object"!=typeof t||Array.isArray(t))return this.where(":id").equals(t).modify(n);Object.keys(n).forEach(function(e){P(t,e,n[e])});var r=k(t,this.schema.primKey.keyPath);return r===e&&R.reject(new pt("Object does not contain its primary key")),this.where(":id").equals(r).modify(n)}}}),r(V.prototype,{_lock:function(){return++this._reculock,1===this._reculock&&R.PSD&&(R.PSD.lockOwnerFor=this),this},_unlock:function(){if(0===--this._reculock)for(R.PSD&&(R.PSD.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{t()}catch(n){}}return this},_locked:function(){return this._reculock&&(!R.PSD||R.PSD.lockOwnerFor!==this)},_nop:function(t){this.tables[this.storeNames[0]].get(0).then(t)},_promise:function(t,n,e){var r=this;return R.newPSD(function(){var i;return r._locked()?i=new R(function(i,o){r._blockedFuncs.push(function(){r._promise(t,n,e).then(i,o)})}):(i=r.active?new R(function(i,o){if(!r.idbtrans&&t){if(!_t)throw new pt(xt?"Database not open. Following error in populate, ready or upgrade function made Dexie.open() fail: "+xt:"Database not open");var a=r.idbtrans=_t.transaction(M(r.storeNames),r.mode);a.onerror=function(t){r.on("error").fire(t&&t.target.error),t.preventDefault(),r.abort()},a.onabort=function(t){_(function(){r.on("error").fire(new pt("Transaction aborted for unknown reason"))}),r.active=!1,r.on("abort").fire(t)},a.oncomplete=function(t){r.active=!1,r.on("complete").fire(t)}}e&&r._lock();try{n(i,o,r)}catch(s){u.ignoreTransaction(function(){r.on("error").fire(s)}),r.abort(),o(s)}}):R.reject(I(new pt("Transaction is inactive. Original Scope Function Source: "+r.scopeFunc.toString()))),r.active&&e&&i["finally"](function(){r._unlock()})),i.onuncatched=function(t){u.ignoreTransaction(function(){r.on("error").fire(t)}),r.abort()},i})},complete:function(t){return this.on("complete",t)},error:function(t){return this.on("error",t)},abort:function(){if(this.idbtrans&&this.active)try{this.active=!1,this.idbtrans.abort(),this.on.error.fire(new pt("Transaction Aborted"))}catch(t){}},table:function(t){if(!this.tables.hasOwnProperty(t))throw new pt("Table "+t+" not in transaction");return this.tables[t]}}),r(G.prototype,function(){function t(t,n){try{throw n}catch(e){t._ctx.error=e}return t}function n(t){return Array.prototype.slice.call(1===t.length&&Array.isArray(t[0])?t[0]:t)}function e(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function r(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function i(t,n,e,r,i,o){for(var a=Math.min(t.length,r.length),u=-1,s=0;a>s;++s){var c=n[s];if(c!==r[s])return i(t[s],e[s])<0?t.substr(0,s)+e[s]+e.substr(s+1):i(t[s],r[s])<0?t.substr(0,s)+r[s]+e.substr(s+1):u>=0?t.substr(0,u)+n[u]+e.substr(u+1):null;i(t[s],c)<0&&(u=s)}return a<r.length&&"next"===o?t+e.substr(t.length):a<t.length&&"prev"===o?t.substr(0,e.length):0>u?null:t.substr(0,u)+r[u]+e.substr(u+1)}function o(t,n,o){function a(t){u=e(t),s=r(t),c="next"===t?et:rt,f=u(o),l=s(o),h=t}var u,s,c,f,l,h;a("next"),t._ondirectionchange=function(t){a(t)},t._addAlgorithm(function(t,e,r){var o=t.key;if("string"!=typeof o)return!1;var a=s(o);if(n(a,l))return e(function(){t["continue"]()}),!0;var u=i(o,a,f,l,c,h);return e(u?function(){t["continue"](u)}:r),!1})}return{between:function(t,n,e,r){return e=e!==!1,r=r===!0,t>n||t===n&&(e||r)&&(!e||!r)?new this._ctx.collClass(this,function(){return ht.only(t)}).limit(0):new this._ctx.collClass(this,function(){return ht.bound(t,n,!e,!r)})},equals:function(t){return new this._ctx.collClass(this,function(){return ht.only(t)})},above:function(t){return new this._ctx.collClass(this,function(){return ht.lowerBound(t,!0)})},aboveOrEqual:function(t){return new this._ctx.collClass(this,function(){return ht.lowerBound(t)})},below:function(t){return new this._ctx.collClass(this,function(){return ht.upperBound(t,!0)})},belowOrEqual:function(t){return new this._ctx.collClass(this,function(){return ht.upperBound(t)})},startsWith:function(n){return"string"!=typeof n?t(new this._ctx.collClass(this),new dt("String expected")):this.between(n,n+String.fromCharCode(65535),!0,!0)},startsWithIgnoreCase:function(n){if("string"!=typeof n)return t(new this._ctx.collClass(this),new dt("String expected"));if(""===n)return this.startsWith(n);var e=new this._ctx.collClass(this,function(){return ht.bound(n.toUpperCase(),n.toLowerCase()+String.fromCharCode(65535))});return o(e,function(t,n){return 0===t.indexOf(n)},n),e._ondirectionchange=function(){t(e,new pt("reverse() not supported with WhereClause.startsWithIgnoreCase()"))},e},equalsIgnoreCase:function(n){if("string"!=typeof n)return t(new this._ctx.collClass(this),new dt("String expected"));var e=new this._ctx.collClass(this,function(){return ht.bound(n.toUpperCase(),n.toLowerCase())});return o(e,function(t,n){return t===n},n),e},anyOf:function(t){var e=this._ctx,r=e.table.schema,i=e.index?r.idxByName[e.index]:r.primKey,o=i&&i.compound,a=n(arguments),u=o?it(et):et;if(a.sort(u),0===a.length)return new this._ctx.collClass(this,function(){return ht.only("")}).limit(0);var s=new this._ctx.collClass(this,function(){return ht.bound(a[0],a[a.length-1])});s._ondirectionchange=function(t){u="next"===t?et:rt,o&&(u=it(u)),a.sort(u)};var c=0;return s._addAlgorithm(function(t,n,e){for(var r=t.key;u(r,a[c])>0;)if(++c,c===a.length)return n(e),!1;return 0===u(r,a[c])?(n(function(){t["continue"]()}),!0):(n(function(){t["continue"](a[c])}),!1)}),s},notEqual:function(t){return this.below(t).or(this._ctx.index).above(t)},noneOf:function(t){var e=this._ctx,r=e.table.schema,i=e.index?r.idxByName[e.index]:r.primKey,o=i&&i.compound,a=n(arguments);if(0===a.length)return new this._ctx.collClass(this);var u=o?it(et):et;a.sort(u);var s=a.reduce(function(t,n){return t?t.concat([[t[t.length-1][1],n]]):[[null,n]]},null);s.push([a[a.length-1],null]);var c=this,f=e.index;return s.reduce(function(t,n){return t?null===n[1]?t.or(f).above(n[0]):t.or(f).between(n[0],n[1],!1,!1):c.below(n[1])},null)},startsWithAnyOf:function(e){function r(t){return t>u[c]}function i(t){return t<a[c]}var o=this._ctx,a=n(arguments);if(!a.every(function(t){return"string"==typeof t}))return t(new o.collClass(this),new dt("startsWithAnyOf() only works with strings"));if(0===a.length)return new o.collClass(this,function(){return ht.only("")}).limit(0);var u=a.map(function(t){return t+String.fromCharCode(65535)}),s=et;a.sort(s);var c=0,f=r,l=new o.collClass(this,function(){return ht.bound(a[0],a[a.length-1]+String.fromCharCode(65535))});return l._ondirectionchange=function(t){"next"===t?(f=r,s=et):(f=i,s=rt),a.sort(s),u.sort(s)},l._addAlgorithm(function(t,n,e){for(var r=t.key;f(r);)if(++c,c===a.length)return n(e),!1;return r>=a[c]&&r<=u[c]?(n(function(){t["continue"]()}),!0):(n(function(){s===et?t["continue"](a[c]):t["continue"](u[c])}),!1)}),l}}}),r(Y.prototype,function(){function t(t,n){t.filter=ot(t.filter,n)}function n(t,n){t.isMatch=ot(t.isMatch,n)}function e(t,n){if(t.isPrimKey)return n;var e=t.table.schema.idxByName[t.index];if(!e)throw new pt("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return t.isPrimKey?n:n.index(e.name)}function r(t,n){return e(t,n)[t.op](t.range||null,t.dir+t.unique)}function i(t,n,e,i,o){t.or?!function(){function a(){2===++f&&e()}function u(t,e,r){if(!s||s(e,r,a,i)){var o=e.primaryKey.toString();c.hasOwnProperty(o)||(c[o]=!0,n(t,e,r))}}var s=t.filter,c={},f=(t.table.schema.primKey.keyPath,0);t.or._iterate(u,a,i,o),tt(r(t,o),t.algorithm,u,a,i,t.table.hook.reading.fire)}():tt(r(t,o),ot(t.algorithm,t.filter),n,e,i,t.table.hook.reading.fire)}function o(t){return t.table.schema.instanceTemplate}return{_read:function(t,n){var e=this._ctx;return e.error?e.table._trans(null,function(t,n){n(e.error)}):e.table._idbstore(Pt,t).then(n)},_write:function(t){var n=this._ctx;return n.error?n.table._trans(null,function(t,e){e(n.error)}):n.table._idbstore(St,t,"locked")},_addAlgorithm:function(t){var n=this._ctx;n.algorithm=ot(n.algorithm,t)},_iterate:function(t,n,e,r){return i(this._ctx,t,n,e,r)},each:function(t){var n=this._ctx;return W&&t(o(n)),this._read(function(e,r,o){i(n,t,e,r,o)})},count:function(t){if(W)return R.resolve(0).then(t);var n=this,r=this._ctx;if(r.filter||r.algorithm||r.or){var o=0;return this._read(function(t,n,e){i(r,function(){return++o,!1},function(){t(o)},n,e)},t)}return this._read(function(t,i,o){var a=e(r,o),u=r.range?a.count(r.range):a.count();u.onerror=E(i,["calling","count()","on",n.name]),u.onsuccess=function(n){t(Math.min(n.target.result,Math.max(0,r.limit-r.offset)))}},t)},sortBy:function(t,n){function e(t,n){return n?e(t[i[n]],n-1):t[o]}function r(t,n){var r=e(t,a),i=e(n,a);return i>r?-u:r>i?u:0}var i=(this._ctx,t.split(".").reverse()),o=i[0],a=i.length-1,u="next"===this._ctx.dir?1:-1;return this.toArray(function(t){return t.sort(r)}).then(n)},toArray:function(t){var n=this._ctx;return this._read(function(t,e,r){W&&t([o(n)]);var a=[];i(n,function(t){a.push(t)},function(){t(a)},e,r)},t)},offset:function(n){var e=this._ctx;return 0>=n?this:(e.offset+=n,e.or||e.algorithm||e.filter?t(e,function(t,e,r){return--n<0}):t(e,function(t,e,r){return 0===n?!0:1===n?(--n,!1):(e(function(){t.advance(n),n=0}),!1)}),this)},limit:function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),t(this._ctx,function(t,e,r){return--n<=0&&e(r),n>=0}),this},until:function(n,e){var r=this._ctx;return W&&n(o(r)),t(this._ctx,function(t,r,i){return n(t.value)?(r(i),e):!0}),this},first:function(t){return this.limit(1).toArray(function(t){return t[0]}).then(t)},last:function(t){return this.reverse().first(t)},and:function(e){return W&&e(o(this._ctx)),t(this._ctx,function(t){return e(t.value)}),n(this._ctx,e),this},or:function(t){return new G(this._ctx.table,t,this)},reverse:function(){
return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(t){var n=this._ctx;return W&&t(k(o(this._ctx),this._ctx.index?this._ctx.table.schema.idxByName[this._ctx.index].keyPath:this._ctx.table.schema.primKey.keyPath)),n.isPrimKey||(n.op="openKeyCursor"),this.each(function(n,e){t(e.key,e)})},eachUniqueKey:function(t){return this._ctx.unique="unique",this.eachKey(t)},keys:function(t){var n=this._ctx;n.isPrimKey||(n.op="openKeyCursor");var e=[];return W?new R(this.eachKey.bind(this)).then(function(t){return[t]}).then(t):this.each(function(t,n){e.push(n.key)}).then(function(){return e}).then(t)},uniqueKeys:function(t){return this._ctx.unique="unique",this.keys(t)},firstKey:function(t){return this.limit(1).keys(function(t){return t[0]}).then(t)},lastKey:function(t){return this.reverse().firstKey(t)},distinct:function(){var n={};return t(this._ctx,function(t){var e=t.primaryKey.toString(),r=n.hasOwnProperty(e);return n[e]=!0,!r}),this}}}),o(Q).from(Y).extend({modify:function(t){var n=this,e=this._ctx,i=e.table.hook,o=i.updating.fire,a=i.deleting.fire;return W&&"function"==typeof t&&t.call({value:e.table.schema.instanceTemplate},e.table.schema.instanceTemplate),this._write(function(i,u,c,f){function l(t,n,r){S=n.primaryKey;var i={primKey:n.primaryKey,value:t};if(p.call(i,t)!==!1){var o=!i.hasOwnProperty("value"),a=o?n["delete"]():n.update(i.value);++g,a.onerror=E(function(t){return w.push(t),x.push(i.primKey),i.onerror&&i.onerror(t),d(),!0},o?["deleting",t,"from",e.table.name]:["modifying",t,"on",e.table.name]),a.onsuccess=function(t){i.onsuccess&&i.onsuccess(i.value),++b,d()}}else i.onsuccess&&i.onsuccess(i.value)}function h(t){return t&&(w.push(t),x.push(S)),u(new F("Error modifying one or more objects",w,b,x))}function d(){_&&b+w.length===g&&(w.length>0?h():i(b))}var p;if("function"==typeof t)p=o===s&&a===s?t:function(n){var e=O(n);if(t.call(this,n)===!1)return!1;if(this.hasOwnProperty("value")){var r=T(e,this.value),i=o.call(this,r,this.primKey,e,f);i&&(n=this.value,Object.keys(i).forEach(function(t){P(n,t,i[t])}))}else a.call(this,this.primKey,n,f)};else if(o===s){var m=Object.keys(t),y=m.length;p=function(n){for(var e=!1,r=0;y>r;++r){var i=m[r],o=t[i];k(n,i)!==o&&(P(n,i,o),e=!0)}return e}}else{var v=t;t=D(v),p=function(n){var e=!1,i=o.call(this,t,this.primKey,O(n),f);return i&&r(t,i),Object.keys(t).forEach(function(r){var i=t[r];k(n,r)!==i&&(P(n,r,i),e=!0)}),i&&(t=D(v)),e}}var g=0,b=0,_=!1,w=[],x=[],S=null;n._iterate(l,function(){_=!0,d()},h,c)})},"delete":function(){return this.modify(function(){delete this.value})}}),r(this,{Collection:Y,Table:H,Transaction:V,Version:l,WhereClause:G,WriteableCollection:Q,WriteableTable:J}),i(),ct.forEach(function(t){t(Dt)})}function s(){}function c(t){return t}function f(t,n){return t===c?n:function(e){return n(t(e))}}function l(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function h(t,n){return t===s?n:function(){var r=t.apply(this,arguments);r!==e&&(arguments[0]=r);var i=this.onsuccess,o=this.onerror;delete this.onsuccess,delete this.onerror;var a=n.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?l(i,this.onsuccess):i),o&&(this.onerror=this.onerror?l(o,this.onerror):o),a!==e?a:r}}function d(t,n){return t===s?n:function(){var i=t.apply(this,arguments);i!==e&&r(arguments[0],i);var o=this.onsuccess,a=this.onerror;delete this.onsuccess,delete this.onerror;var u=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?l(o,this.onsuccess):o),a&&(this.onerror=this.onerror?l(a,this.onerror):a),i===e?u===e?e:u:u===e?i:r(i,u)}}function p(t,n){return t===s?n:function(){return t.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function m(t,n){return t===s?n:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function y(t,n){return t===s?n:function(){t.apply(this,arguments),n.apply(this,arguments)}}function v(t,n){return t===s?n:function(){var e=t.apply(this,arguments);if(e&&"function"==typeof e.then){var r=this,i=arguments;return e.then(function(){return n.apply(r,i)})}return n.apply(this,arguments)}}function g(n,e){function r(t,n,e){if(Array.isArray(t))return o(t);if("object"==typeof t)return i(t);n||(n=p),e||(e=s);var r={subscribers:[],fire:e,subscribe:function(t){r.subscribers.push(t),r.fire=n(r.fire,t)},unsubscribe:function(t){r.subscribers=r.subscribers.filter(function(n){return n!==t}),r.fire=r.subscribers.reduce(n,e)}};return u[t]=c[t]=r,r}function i(n){Object.keys(n).forEach(function(e){var i=n[e];if(Array.isArray(i))r(e,n[e][0],n[e][1]);else{if("asap"!==i)throw new Error("Invalid event config");var o=r(e,null,function(){var n=arguments;o.subscribers.forEach(function(e){_(function(){e.apply(t,n)})})});o.subscribe=function(t){-1===o.subscribers.indexOf(t)&&o.subscribers.push(t)},o.unsubscribe=function(t){var n=o.subscribers.indexOf(t);-1!==n&&o.subscribers.splice(n,1)}}})}function o(t){function n(){return e?!1:void(e=!0)}var e=!1;t.forEach(function(t){r(t).subscribe(n)})}var a=arguments,u={},c=function(t,e){if(e){var r=[].slice.call(arguments,1),i=u[t];return i.subscribe.apply(i,r),n}return"string"==typeof t?u[t]:void 0};c.addEventType=r;for(var f=1,l=a.length;l>f;++f)r(a[f]);return c}function b(t){if(!t)throw new Error("Assertion failed")}function _(n){t.setImmediate?i(n):setTimeout(n,0)}function w(t){var n=setTimeout(t,1e3);clearTimeout(n)}function x(t,n,e){return function(){var r=R.PSD;R.PSD=e;try{t.apply(this,arguments)}catch(i){n(i)}finally{R.PSD=r}}}function k(t,n){if(t.hasOwnProperty(n))return t[n];if(!n)return t;if("string"!=typeof n){for(var r=[],i=0,o=n.length;o>i;++i){var a=k(t,n[i]);r.push(a)}return r}var u=n.indexOf(".");if(-1!==u){var s=t[n.substr(0,u)];return s===e?e:k(s,n.substr(u+1))}return e}function P(t,n,r){if(t&&n!==e)if("string"!=typeof n&&"length"in n){b("string"!=typeof r&&"length"in r);for(var i=0,o=n.length;o>i;++i)P(t,n[i],r[i])}else{var a=n.indexOf(".");if(-1!==a){var u=n.substr(0,a),s=n.substr(a+1);if(""===s)r===e?delete t[u]:t[u]=r;else{var c=t[u];c||(c=t[u]={}),P(c,s,r)}}else r===e?delete t[n]:t[n]=r}}function S(t,n){"string"==typeof n?P(t,n,e):"length"in n&&[].map.call(n,function(n){P(t,n,e)})}function D(t){var n={};for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function O(t){if(!t||"object"!=typeof t)return t;var n;if(Array.isArray(t)){n=[];for(var e=0,r=t.length;r>e;++e)n.push(O(t[e]))}else if(t instanceof Date)n=new Date,n.setTime(t.getTime());else{n=t.constructor?Object.create(t.constructor.prototype):{};for(var i in t)t.hasOwnProperty(i)&&(n[i]=O(t[i]))}return n}function T(t,n){var r={};for(var i in t)t.hasOwnProperty(i)&&(n.hasOwnProperty(i)?t[i]!==n[i]&&JSON.stringify(t[i])!=JSON.stringify(n[i])&&(r[i]=n[i]):r[i]=e);for(var i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(r[i]=n[i]);return r}function j(t){if("function"==typeof t)return new t;if(Array.isArray(t))return[j(t[0])];if(t&&"object"==typeof t){var n={};return C(n,t),n}return t}function C(t,n){Object.keys(n).forEach(function(e){var r=j(n[e]);t[e]=r})}function E(t,n){return function(e){var r=e&&e.target.error||new Error;if(n){var i=" occurred when "+n.map(function(t){switch(typeof t){case"function":return t();case"string":return t;default:return JSON.stringify(t)}}).join(" ");r.name?r.toString=function(){return r.name+i+(r.message?". "+r.message:"")}:r+=i}return t(r),e&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()),!1}}function I(t){try{throw t}catch(n){return n}}function A(t){t.preventDefault()}function K(t){var n,e=u.dependencies.localStorage;if(!e)return t([]);try{n=JSON.parse(e.getItem("Dexie.DatabaseNames")||"[]")}catch(r){n=[]}t(n)&&e.setItem("Dexie.DatabaseNames",JSON.stringify(n))}function B(t,n,e,r,i,o,a){this.name=t,this.keyPath=n,this.unique=e,this.multi=r,this.auto=i,this.compound=o,this.dotted=a;var u="string"==typeof n?n:n&&"["+[].join.call(n,"+")+"]";this.src=(e?"&":"")+(r?"*":"")+(i?"++":"")+u}function N(t,n,e,r){this.name=t,this.primKey=n||new B,this.indexes=e||[new B],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=e.reduce(function(t,n){return t[n.name]=n,t},{})}function F(t,n,e,r){this.name="ModifyError",this.failures=n,this.failedKeys=r,this.successCount=e,this.message=n.join("\n")}function M(t){return 1===t.length?t[0]:t}function q(){var t=u.dependencies.indexedDB,n=t&&(t.getDatabaseNames||t.webkitGetDatabaseNames);return n&&n.bind(t)}var R=function(){function n(t,n){b.push([t,p.call(arguments,1)])}function e(){var n=b;b=[];for(var e=0,r=n.length;r>e;++e){var i=n[e];i[0].apply(t,i[1])}}function r(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],this._catched=!1;var n=this,e=!0;this._PSD=r.PSD;try{d(this,t,function(t){e?y(c,n,t):c(n,t)},function(t){return e?(y(f,n,t),!1):f(n,t)})}finally{e=!1}}function o(t,i){if(null===t._state)return void t._deferreds.push(i);var o=t._state?i.onFulfilled:i.onRejected;if(null===o)return(t._state?i.resolve:i.reject)(t._value);var a,s=v;v=!1,y=n;try{var c=r.PSD;r.PSD=t._PSD,a=o(t._value),t._state||a&&"function"==typeof a.then&&a._state===!1||u(t),i.resolve(a)}catch(f){var l=i.reject(f);if(!l&&t.onuncatched)try{t.onuncatched(f)}catch(f){}}finally{if(r.PSD=c,s){do{for(;b.length>0;)e();var h=_.pop();if(h)try{h()}catch(f){}}while(_.length>0||b.length>0);y=m,v=!0}}}function a(t){var r=v;v=!1,y=n;try{t()}finally{if(r){do{for(;b.length>0;)e();var i=_.pop();if(i)try{i()}catch(o){}}while(_.length>0||b.length>0);y=m,v=!0}}}function u(t){t._catched=!0,t._parent&&u(t._parent)}function c(t,n){var e=r.PSD;r.PSD=t._PSD;try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)&&"function"==typeof n.then)return void d(t,function(t,e){n.then(t,e)},function(n){c(t,n)},function(n){f(t,n)});t._state=!0,t._value=n,l.call(t)}catch(i){f(i)}finally{r.PSD=e}}function f(t,n){var e=r.PSD;if(r.PSD=t._PSD,t._state=!1,t._value=n,l.call(t),!t._catched)try{t.onuncatched&&t.onuncatched(t._value),r.on.error.fire(t._value)}catch(i){}return r.PSD=e,t._catched}function l(){for(var t=0,n=this._deferreds.length;n>t;t++)o(this,this._deferreds[t]);this._deferreds=[]}function h(t,n,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.resolve=e,this.reject=r}function d(t,n,e,r){var i=!1;try{n(function(t){i||(i=!0,e(t))},function(n){return i?t._catched:(i=!0,r(n))})}catch(o){if(i)return;return r(o)}}var p=[].slice,m="undefined"==typeof i?function(n,e,r,i){var o=arguments;setTimeout(function(){n.apply(t,p.call(o,1))},0)}:i;w(function(){m=y=n=function(n){var e=arguments;setTimeout(function(){n.apply(t,p.call(e,1))},0)}});var y=m,v=!0,b=[],_=[];return r.on=g(null,"error"),r.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments);return new r(function(n,e){function r(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,function(t){r(o,t)},e)}t[o]=a,0===--i&&n(t)}catch(s){e(s)}}if(0===t.length)return n([]);for(var i=t.length,o=0;o<t.length;o++)r(o,t[o])})},r.prototype.then=function(t,n){var e=this,i=new r(function(r,i){null===e._state?o(e,new h(t,n,r,i)):y(o,e,new h(t,n,r,i))});return i._PSD=this._PSD,i.onuncatched=this.onuncatched,i._parent=this,i},r.prototype._then=function(t,n){o(this,new h(t,n,s,s))},r.prototype["catch"]=function(t){if(1===arguments.length)return this.then(null,t);var n=arguments[0],e=arguments[1];return"function"==typeof n?this.then(null,function(t){return t instanceof n?e(t):r.reject(t)}):this.then(null,function(t){return t&&t.name===n?e(t):r.reject(t)})},r.prototype["finally"]=function(t){return this.then(function(n){return t(),n},function(n){return t(),r.reject(n)})},r.prototype.onuncatched=null,r.resolve=function(t){var n=new r(function(){});return n._state=!0,n._value=t,n},r.reject=function(t){var n=new r(function(){});return n._state=!1,n._value=t,n},r.race=function(t){return new r(function(n,e){t.map(function(t){t.then(n,e)})})},r.PSD=null,r.newPSD=function(t){var n=r.PSD;r.PSD=n?Object.create(n):{};try{return t()}finally{r.PSD=n}},r._rootExec=a,r._tickFinalize=function(t){if(v)throw new Error("Not in a virtual tick");_.push(t)},r}(),U=function(){},W=!1;o(F).from(Error),u["delete"]=function(t){var n=new u(t),e=n["delete"]();return e.onblocked=function(t){return n.on("blocked",t),this},e},u.exists=function(t){return new u(t).open().then(function(t){return t.close(),!0},function(){return!1})},u.getDatabaseNames=function(t){return new R(function(t,n){var e=q();if(e){var r=e();r.onsuccess=function(n){t([].slice.call(n.target.result,0))},r.onerror=E(n)}else K(function(n){return t(n),!1})}).then(t)},u.defineClass=function(t){function n(n){n?r(this,n):W&&C(this,t)}return n},u.ignoreTransaction=function(t){return R.newPSD(function(){return R.PSD.trans=null,t()})},u.spawn=function(){return t.console&&console.warn("Dexie.spawn() is deprecated. Use Dexie.ignoreTransaction() instead."),u.ignoreTransaction.apply(this,arguments)},u.vip=function(t){return R.newPSD(function(){return R.PSD.letThrough=!0,t()})},Object.defineProperty(u,"currentTransaction",{get:function(){return R.PSD&&R.PSD.trans||null}}),u.Promise=R,u.derive=o,u.extend=r,u.override=a,u.events=g,u.getByKeyPath=k,u.setByKeyPath=P,u.delByKeyPath=S,u.shallowClone=D,u.deepClone=O,u.addons=[],u.fakeAutoComplete=U,u.asap=_,u.ModifyError=F,u.MultiModifyError=F,u.IndexSpec=B,u.TableSchema=N;var L=t.idbModules&&t.idbModules.shimIndexedDB?t.idbModules:{};u.dependencies={indexedDB:L.shimIndexedDB||t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB,IDBKeyRange:L.IDBKeyRange||t.IDBKeyRange||t.webkitIDBKeyRange,IDBTransaction:L.IDBTransaction||t.IDBTransaction||t.webkitIDBTransaction,Error:t.Error||String,SyntaxError:t.SyntaxError||String,TypeError:t.TypeError||String,DOMError:t.DOMError||String,localStorage:null!=("undefined"!=typeof chrome&&null!==chrome?chrome.storage:void 0)?null:t.localStorage},u.version=1.2,n("Dexie",u),w(function(){u.fakeAutoComplete=U=w,u.fake=W=!0})}).apply(null,[self||window,function(i,o){r=function(){return o}.call(n,e,n,t),!(void 0!==r&&(t.exports=r))}])}).call(n,e(1).setImmediate)},function(t,n){function e(){c=!1,a.length?s=a.concat(s):f=-1,s.length&&r()}function r(){if(!c){var t=setTimeout(e);c=!0;for(var n=s.length;n;){for(a=s,s=[];++f<n;)a&&a[f].run();f=-1,n=s.length}a=null,c=!1,clearTimeout(t)}}function i(t,n){this.fun=t,this.array=n}function o(){}var a,u=t.exports={},s=[],c=!1,f=-1;u.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];s.push(new i(t,n)),1!==s.length||c||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}}]);