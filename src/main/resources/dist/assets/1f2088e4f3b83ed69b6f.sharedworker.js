!function(n){function t(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return n[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var e={};return t.m=n,t.c=e,t.p="/assets/",t(0)}([function(n,t,e){(function(n){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}function r(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)}var i,o=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},u=e(2),a=t(u),s=e(3),c=t(s),f=e(5),l=new Map,h=void 0,d=!1,p=new Array;n.onconnect=function(n){var t=n.ports[0];t.onmessage=function(n){n.data instanceof Object&&(n.data.hasOwnProperty("username")?h=Object.assign.apply(Object,[{},h].concat([n.data])):n.data.hasOwnProperty("token")?h=Object.assign({},h,n.data):n.data.hasOwnProperty("isOnline")?(d=n.data.isOnline,n.data.hasOwnProperty("type")&&(p=[t].concat(r(p)))):n.data.hasOwnProperty("entity")&&n.data.hasOwnProperty("table")&&n.data.hasOwnProperty("path")&&n.data.hasOwnProperty("action")?void 0!==h&&y(o({},n.data),n.data.entity,h):n.data.hasOwnProperty("table")&&n.data.hasOwnProperty("path")&&n.data.hasOwnProperty("action")&&l.set(n.data.table,n.data)),clearInterval(i),v()&&(i=setInterval(function(){v()?!function(){var n=(0,c["default"])(h);n.open(),l.forEach(function(t,e,r){n[e].where("status").equals("PENDING_IDLE").each(function(n){y(t,n,h)})})}():clearInterval(i)},a["default"].entityUpdateInterval))}};var v=function(){return void 0!==h&&void 0!==h.token&&d&&l.size>0},y=function(n,t,e){var r=(0,c["default"])(e),i=n.path,o=n.action,u=n.table,s=Object.assign({},t);delete s.status;var l=Object.freeze(s);p.forEach(function(n){return n.postMessage({action:o,entity:l,status:f.PENDING_ACTIVE})}),r.open();var h=r[u],d=r[u+"Orig"];h.get(l.id).then(function(n){void 0===n.status&&d.put(n)}).then(function(){return h.put(Object.assign({},l,{status:f.PENDING_IDLE}))});var v="undefined"!=typeof l.isNew&&l.isNew;fetch(a["default"].apiUrl+(v?i.post:i.put),{method:v?"POST":"PUT",body:JSON.stringify(l),mode:a["default"].cors,headers:new Headers({Authorization:"Bearer "+e.token,"Content-Type":"application/json"})}).then(function(n){200==n.status||201==n.status?!function(){var n=Object.assign({},l);delete n.isNew,p.forEach(function(n){return n.postMessage({action:o,entity:l,status:f.SUCCESS})}),r.transaction("rw",h,d,function(){h["delete"](l.id),h.put(n),d["delete"](l.id)});var t=setTimeout(function(){p.forEach(function(t){return t.postMessage({action:o,entity:n})}),clearTimeout(t)},5e3)}():!function(){var t=Object.assign({},l,{status:f.FAILURE,error:n.statusText});p.forEach(function(n){return n.postMessage({action:o,entity:t,status:f.FAILURE})}),h.put(t)}()})["catch"](function(){p.forEach(function(n){return n.postMessage({action:o,entity:l,status:f.PENDING_IDLE})}),r.transaction("rw",h,d,function(){h["delete"](l.id).then(function(){return h.put(Object.assign({},l,{status:f.PENDING_IDLE}))})})})}}).call(t,function(){return this}())},function(n,t,e){(function(n,r){function i(n,t){this._id=n,this._clearFn=t}var o=e(7).nextTick,u=Function.prototype.apply,a=Array.prototype.slice,s={},c=0;t.setTimeout=function(){return new i(u.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(u.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(n){n.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(n,t){clearTimeout(n._idleTimeoutId),n._idleTimeout=t},t.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},t._unrefActive=t.active=function(n){clearTimeout(n._idleTimeoutId);var t=n._idleTimeout;t>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},t))},t.setImmediate="function"==typeof n?n:function(n){var e=c++,r=arguments.length<2?!1:a.call(arguments,1);return s[e]=!0,o(function(){s[e]&&(r?n.apply(null,r):n.call(null),t.clearImmediate(e))}),e},t.clearImmediate="function"==typeof r?r:function(n){delete s[n]}}).call(t,e(1).setImmediate,e(1).clearImmediate)},function(n,t,e){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var i=e(4),o=r(i),u={url:"http://sisdn.herokuapp.com",appEnv:"dist",apiUrl:"http://sisdn.herokuapp.com/api",keycloak:{url:"https://keycloak-sisdn.rhcloud.com/auth",realm:"sisdn-realm",clientId:"sisdn",redirect_uri:"http://sisdn.herokuapp.com/login",flow:"standard"}};n.exports=Object.freeze(Object.assign({},o["default"],u))},function(n,t,e){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function i(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function o(n){var t=c["default"].db.version,e=new a["default"](n.username+"@sisdn-"+t),r={},o=!0,u=!1,s=void 0;try{for(var f,l=c["default"].admin.db[Symbol.iterator]();!(o=(f=l.next()).done);o=!0){var h=f.value;Object.assign(r,i({},h.name,h.schema),i({},h.name+"Orig",h.schema))}}catch(d){u=!0,s=d}finally{try{!o&&l["return"]&&l["return"]()}finally{if(u)throw s}}return e.version(t).stores(r),e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var u=e(6),a=r(u),s=e(2),c=r(s)},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e={name:"faculties",schema:"id, title, titleTr, isActive, status, ts"},r={name:"departments",schema:"id, title, titleTr, isActive, status, ts"},i={name:"courses",schema:"id, title, titleTr, facultyId, departmentId, remarks, isActive, status, ts"},o={name:"programs",schema:"id, title, titleTr, facultyId, terms, creditHours, isActive, status, ts"};t["default"]={onlineCheckInterval:1e4,entityUpdateInterval:1e4,cors:"cors",db:{name:"sisdndb",version:"1"},admin:{db:[e,r,i,o],path:{get:"/admin"},faculties:{path:{post:"/admin/faculties",put:"/admin/faculties",get:"/admin/faculties"}},departments:{path:{post:"/admin/departments",put:"/admin/departments",get:"/admin/departments"}},courses:{path:{post:"/admin/courses",put:"/admin/courses",get:"/admin/courses"}},programs:{path:{post:"/admin/programs",put:"/admin/programs",get:"/admin/programs"}}}}},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SUCCESS="SUCCESS",t.FAILURE="FAILURE",t.PENDING_ACTIVE="PENDING_ACTIVE",t.PENDING_IDLE="PENDING_IDLE",t.EXISTING="EXISTING"},function(n,t,e){(function(t,e){!function(t,e){n.exports=e()}(this,function(){"use strict";function n(){}function r(n){return n}function i(n,t){return null==n||n===r?t:function(e){return t(n(e))}}function o(n,t){return function(){n.apply(this,arguments),t.apply(this,arguments)}}function u(t,e){return t===n?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var u=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?o(r,this.onsuccess):r),i&&(this.onerror=this.onerror?o(i,this.onerror):i),void 0!==u?u:n}}function a(t,e){return t===n?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?o(n,this.onsuccess):n),r&&(this.onerror=this.onerror?o(r,this.onerror):r)}}function s(t,e){return t===n?e:function(){var n=t.apply(this,arguments);h(arguments[0],n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var u=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?o(r,this.onsuccess):r),i&&(this.onerror=this.onerror?o(i,this.onerror):i),void 0===n?void 0===u?void 0:u:h(n,u)}}function c(t,e){return t===n?e:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function f(t,e){return t===n?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function l(t,e){return t===n?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){var r=this,i=arguments;return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}function h(n,t){return"object"!=typeof t?n:(an(t).forEach(function(e){n[e]=t[e]}),n)}function d(n,t){"function"==typeof t&&(t=t(Object.getPrototypeOf(n))),an(t).forEach(function(e){p(n,e,t[e])})}function p(n,t,e,r){Object.defineProperty(n,t,h("function"==typeof e.get?{get:e.get,set:e.set,configurable:!0}:{value:e,configurable:!0,writable:!0},r))}function v(n){return{from:function(t){return n.prototype=Object.create(t.prototype),p(n.prototype,"constructor",n),{extend:d.bind(null,n.prototype)}}}}function y(n,t,e){return fn.call(n,t,e)}function m(n,t){return t(n)}function g(n){var t=setTimeout(n,1e3);clearTimeout(t)}function b(n){if(!n)throw new mn.Internal("Assertion failed")}function w(n){cn.setImmediate?e(n):setTimeout(n,0)}function _(n,t){try{n()}catch(e){t&&t(e)}}function P(n){var t=n&&n.stack;return t?t.indexOf(n+"")>0?t:n+". "+t:n}function x(n){if(n.stack)return n;try{var t=new Error(n.message||n);if(t.stack)return n.stack=t.stack,n;throw t}catch(e){n.stack=e.stack}return n}function k(n){return M.reject(x(n))}function D(n,t){if(n.hasOwnProperty(t))return n[t];if(!t)return n;if("string"!=typeof t){for(var e=[],r=0,i=t.length;i>r;++r){var o=D(n,t[r]);e.push(o)}return e}var u=t.indexOf(".");if(-1!==u){var a=n[t.substr(0,u)];return void 0===a?void 0:D(a,t.substr(u+1))}}function S(n,t,e){if(n&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(n)))if("string"!=typeof t&&"length"in t){b("string"!=typeof e&&"length"in e);for(var r=0,i=t.length;i>r;++r)S(n,t[r],e[r])}else{var o=t.indexOf(".");if(-1!==o){var u=t.substr(0,o),a=t.substr(o+1);if(""===a)void 0===e?delete n[u]:n[u]=e;else{var s=n[u];s||(s=n[u]={}),S(s,a,e)}}else void 0===e?delete n[t]:n[t]=e}}function O(n,t){"string"==typeof t?S(n,t,void 0):"length"in t&&[].map.call(t,function(t){S(n,t,void 0)})}function I(n){var t={};for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function E(n){if(!n||"object"!=typeof n)return n;var t;if(sn(n)){t=[];for(var e=0,r=n.length;r>e;++e)t.push(E(n[e]))}else if(n instanceof Date)t=new Date,t.setTime(n.getTime());else{t=n.constructor?Object.create(n.constructor.prototype):{};for(var i in n)n.hasOwnProperty(i)&&(t[i]=E(n[i]))}return t}function T(n,t,e,r){e=e||{},r=r||"";for(var i in n)if(n.hasOwnProperty(i))if(t.hasOwnProperty(i)){var o=n[i],u=t[i];"object"==typeof o&&"object"==typeof u?T(o,u,e,r+i+"."):o!==u&&(e[r+i]=t[i])}else e[r+i]=void 0;for(i in t)t.hasOwnProperty(i)&&!n.hasOwnProperty(i)&&(e[r+i]=t[i]);return e}function A(n,t){this.name=n,this.message=t}function j(n,t){return n+". Errors: "+t.map(function(n){return n.toString()}).filter(function(n,t,e){return e.indexOf(n)===t}).join("\n")}function C(n,t,e,r){this.name="ModifyError",this.failures=t,this.failedKeys=r,this.successCount=e,this.message=j(n,t)}function N(n,t){this.name="BulkError",this.failures=t,this.message=j(n,t)}function K(n,t){var e=n;return n instanceof A||!n.name||!gn[n.name]||(e=new gn[n.name](t||n.message,n),n.stack&&(e.stack=n.stack)),e}function F(t){function e(t,e,o){if(sn(t))return i(t);if("object"==typeof t)return r(t);e||(e=c),o||(o=n);var s={subscribers:[],fire:o,subscribe:function(n){s.subscribers.push(n),s.fire=e(s.fire,n)},unsubscribe:function(n){s.subscribers=s.subscribers.filter(function(t){return t!==n}),s.fire=s.subscribers.reduce(e,o)}};return u[t]=a[t]=s,s}function r(n){an(n).forEach(function(t){var r=n[t];if(sn(r))e(t,n[t][0],n[t][1]);else{if("asap"!==r)throw new mn.InvalidArgument("Invalid event config");var i=e(t,null,function(){var n=arguments;i.subscribers.forEach(function(t){w(function(){t.apply(cn,n)})})});i.subscribe=function(n){-1===i.subscribers.indexOf(n)&&i.subscribers.push(n)},i.unsubscribe=function(n){var t=i.subscribers.indexOf(n);-1!==t&&i.subscribers.splice(t,1)}}})}function i(n){function t(){return r?!1:void(r=!0)}var r=!1;n.forEach(function(n){e(n).subscribe(t)})}var o=arguments,u={},a=function(n,e){if(e){var r=y(arguments,1),i=u[n];return i.subscribe.apply(i,r),t}return"string"==typeof n?u[n]:void 0};a.addEventType=e;for(var s=1,f=o.length;f>s;++s)e(o[s]);return a}function B(){var n=xn;xn=[];for(var t=0,e=n.length;e>t;++t){var r=n[t];r[0].apply(cn,r[1])}}function M(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],this._catched=!1;var t=this,e=!0;this._PSD=M.PSD;try{z(this,n,function(n){e?_n(L,t,n):L(t,n)},function(n){return e?(_n(V,t,n),!1):V(t,n)})}finally{e=!1}}function R(n,t){if(null===n._state)return void n._deferreds.push(t);var e=n._state?t.onFulfilled:t.onRejected;if(null===e)return(n._state?t.resolve:t.reject)(n._value);var r,i=Pn;Pn=!1,_n=Dn;try{var o=M.PSD;M.PSD=n._PSD,r=e(n._value),n._state||r&&"function"==typeof r.then&&r._state===!1||q(n),t.resolve(r)}catch(u){t.reject(u)}finally{if(M.PSD=o,i){do{for(;xn.length>0;)B();var a=kn.pop();if(a)try{a()}catch(u){}}while(kn.length>0||xn.length>0);_n=wn,Pn=!0}}}function U(n){var t=Pn;Pn=!1,_n=Dn;try{return n()}finally{if(t){do{for(;xn.length>0;)B();var e=kn.pop();if(e)try{e()}catch(r){}}while(kn.length>0||xn.length>0);_n=wn,Pn=!0}}}function q(n){n._catched=!0,n._parent&&!n._parent._catched&&q(n._parent)}function L(n,t){var e=M.PSD;M.PSD=n._PSD;try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then)return t instanceof M&&null!==t._state?(n._state=t._state,n._value=t._value,void G.call(n)):void z(n,function(n,e){t.then(n,e)},function(t){L(n,t)},function(t){V(n,t)});n._state=!0,n._value=t,G.call(n)}catch(r){V(r)}finally{M.PSD=e}}function V(n,t){var e=M.PSD;if(M.PSD=n._PSD,n._state=!1,n._value=t,G.call(n),!n._catched)try{n.onuncatched?n.onuncatched(n._value):M.on.error.fire(n._value)}catch(r){}return M.PSD=e,n._catched}function G(){for(var n=0,t=this._deferreds.length;t>n;n++)R(this,this._deferreds[n]);this._deferreds=[]}function W(n,t,e,r){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.resolve=e,this.reject=r}function z(n,t,e,r){var i=!1;try{t(function(n){i||(i=!0,e(n))},function(t){return i?n._catched:(i=!0,r(t))})}catch(o){if(i)return;return r(o)}}function H(n){console.warn("Uncaught Promise: "+P(n))}function J(t,e){function o(){$n.on("versionchange",function(n){n.newVersion>0?console.warn("Another connection wants to upgrade database '"+$n.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+$n.name+"'. Closing db now to resume the delete request."),$n.close()}),$n.on("blocked",function(n){!n.newVersion||n.newVersion<n.oldVersion?console.warn("Dexie.delete('"+$n.name+"') was blocked"):console.warn("Upgrade '"+$n.name+"' blocked by other connection holding version "+n.oldVersion/10)})}function c(n){this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function g(n,t,e,r){if(0===n){an(Ln).forEach(function(n){P(t,n,Ln[n].primKey,Ln[n].indexes)});var i=$n._createTransaction(Zn,Gn,Ln);i.idbtrans=t,i.idbtrans.onerror=Z(e,["populating database"]),i.on("error").subscribe(e),M.newPSD(function(){M.PSD.trans=i;try{$n.on("populate").fire(i)}catch(n){r.onerror=t.onerror=function(n){n.preventDefault()};try{t.abort()}catch(o){}t.db.close(),e(n)}})}else{var o=[],u=Vn.filter(function(t){return t._cfg.version===n})[0];if(!u)throw new mn.Upgrade("Dexie specification of currently installed DB version is missing");Ln=$n._dbSchema=u._cfg.dbschema;var a=!1,s=Vn.filter(function(t){return t._cfg.version>n});s.forEach(function(n){var r=Ln,i=n._cfg.dbschema;Dn(r,t),Dn(i,t),Ln=$n._dbSchema=i;var u=b(r,i);u.add.forEach(function(n){o.push(function(t,e){P(t,n[0],n[1].primKey,n[1].indexes),e()})}),u.change.forEach(function(n){if(n.recreate)throw new mn.Upgrade("Not yet support for changing primary key");o.push(function(t,e){var r=t.objectStore(n.name);n.add.forEach(function(n){j(r,n)}),n.change.forEach(function(n){r.deleteIndex(n.name),j(r,n)}),n.del.forEach(function(n){r.deleteIndex(n)}),e()})}),n._cfg.contentUpgrade&&o.push(function(t,r){a=!0;var o=$n._createTransaction(Zn,y(t.db.objectStoreNames),i);o.idbtrans=t;var u=0;o._promise=m(o._promise,function(n){return function(t,e,i){function o(n){return function(){n.apply(this,arguments),0===--u&&r()}}return++u,n.call(this,t,function(n,t){arguments[0]=o(n),arguments[1]=o(t),e.apply(this,arguments)},i)}}),t.onerror=Z(e,["running upgrader function for version",n._cfg.version]),o.on("error").subscribe(e),n._cfg.contentUpgrade(o),0===u&&r()}),a&&!jn||o.push(function(n,t){A(i,n),t()})});var c=function(){try{o.length?o.shift()(t,c):O(Ln,t)}catch(n){r.onerror=t.onerror=function(n){n.preventDefault()};try{t.abort()}catch(i){}t.db.close(),e(n)}};c()}}function b(n,t){var e={del:[],add:[],change:[]};for(var r in n)t[r]||e.del.push(r);for(r in t){var i=n[r],o=t[r];if(i){var u={name:r,def:t[r],recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)u.recreate=!0,e.change.push(u);else{var a=i.indexes.reduce(function(n,t){return n[t.name]=t,n},{}),s=o.indexes.reduce(function(n,t){return n[t.name]=t,n},{});for(var c in a)s[c]||u.del.push(c);for(c in s){var f=a[c],l=s[c];f?f.src!==l.src&&u.change.push(l):u.add.push(l)}(u.recreate||u.del.length>0||u.add.length>0||u.change.length>0)&&e.change.push(u)}}else e.add.push([r,o])}return e}function P(n,t,e,r){var i=n.db.createObjectStore(t,e.keyPath?{keyPath:e.keyPath,autoIncrement:e.auto}:{autoIncrement:e.auto});return r.forEach(function(n){j(i,n)}),i}function O(n,t){an(n).forEach(function(e){t.db.objectStoreNames.contains(e)||P(t,e,n[e].primKey,n[e].indexes)})}function A(n,t){for(var e=0;e<t.db.objectStoreNames.length;++e){var r=t.db.objectStoreNames[e];null!==n[r]&&void 0!==n[r]||t.db.deleteObjectStore(r)}}function j(n,t){n.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function B(){nt.forEach(function(n){n.resume()})}function R(n,t){throw new mn.InvalidTable("Table "+t[0]+" not part of transaction. Original Scope Function Source: "+J.Promise.PSD.trans.scopeFunc.toString())}function U(t,e,o,c){this.name=t,this.schema=o,this.hook=Wn[t]?Wn[t].hook:F(null,{creating:[u,n],reading:[i,r],updating:[s,n],deleting:[a,n]}),this._tpf=e,this._collClass=c||Y}function q(n,t,e,r){U.call(this,n,t,e,r||cn)}function L(n,t){var e=M.PSD;return function(r){try{r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault();var i=r.target.error;n.push(i),r.target._err&&M.usePSD(e,r.target._err.bind(null,i))}finally{t&&t()}}}function V(n){var t=M.PSD;return function(e){var r;try{r=e.target.error,e.target._err&&M.usePSD(t,e.target._err.bind(null,r))}finally{n(r)}}}function G(n,t){var e=M.PSD;return t?function(t){var r;try{r=t.target.result,t.target._suc&&M.usePSD(e,t.target._suc.bind(null,r))}finally{n&&n(r)}}:function(t){n(t.target.result)}}function W(n,t,e,r,i){return new M(function(o,u){var a=e.length,s=a-1;if(0===a)return o();if(r){var c={onsuccess:null,onerror:null},f=V(function(n){return u(K(n))}),l=G(null,!0);_(function(){for(var r=0;a>r;++r){var u=e[r];i.call(c,u[0],u[1],t);var h=n["delete"](u[0]);c.onerror&&(h._err=c.onerror),c.onsuccess&&(h._suc=c.onsuccess),h.onerror=f,r===s?h.onsuccess=G(o,!0):h.onsuccess=l,c.onsuccess=null,c.onerror=null}},function(n){throw c.onerror&&c.onerror(n),n})}else for(var h=0;a>h;++h){var d=n["delete"](e[h]);d.onerror=function(n){return u(K(n.target.error))},h===s&&(d.onsuccess=function(){return o()})}})}function z(n,t,e,r){function i(n,t,e,r){return o._promise(n,e,r)}var o=this;this.db=$n,this.mode=n,this.storeNames=t,this.idbtrans=null,this.on=F(this,["complete","error"],"abort"),this._reculock=0,this._blockedFuncs=[],this._psd=null,this.active=!0,this._dbschema=e,r&&(this.parent=r),this._tpf=i,this.tables=Object.create(zn);for(var u=t.length-1;-1!==u;--u){var a=t[u],s=$n._tableFactory(n,e[a],i);this.tables[a]=s,this[a]||(this[a]=s)}}function H(n,t,e){this._ctx={table:n,index:":id"===t?null:t,collClass:n._collClass,or:e}}function Y(n,t){var e=null,r=null;if(t)try{e=t()}catch(i){r=x(K(i))}var o=n._ctx,u=o.table;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:e,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueFilter:u.hook.reading.fire}}function cn(){Y.apply(this,arguments)}function fn(n,t){return n._cfg.version-t._cfg.version}function ln(n,t,e,r,i,o){e.forEach(function(e){var u=$n._tableFactory(r,i[e],t);n.forEach(function(n){n[e]||(o?p(n,e,{get:function(){var n=M.PSD&&M.PSD.trans;return n&&n.db===$n?n.tables[e]:u}},{enumerable:!0}):n[e]=u)})})}function hn(n){n.forEach(function(n){for(var t in n)n[t]instanceof U&&delete n[t]})}function dn(n,t,e,i,o,u){u=u||r,n.onerror||(n.onerror=Z(o)),t?n.onsuccess=X(function(){var r=n.result;if(r){var a=function(){r["continue"]()};t(r,function(n){a=n},i,o)&&e(u(r.value),r,function(n){a=n}),a()}else i()},o):n.onsuccess=X(function(){var t=n.result;if(t){var r=function(){t["continue"]()};e(u(t.value),t,function(n){r=n}),r()}else i()},o)}function pn(n){var t=[];return n.split(",").forEach(function(n){n=n.trim();var e=n.replace("&","").replace("++","").replace("*",""),r=0!==e.indexOf("[")?e:n.substring(n.indexOf("[")+1,n.indexOf("]")).split("+");t.push(new en(e,r||null,-1!==n.indexOf("&"),-1!==n.indexOf("*"),-1!==n.indexOf("++"),sn(r),-1!==r.indexOf(".")))}),t}function vn(n,t){return Un.cmp(n,t)}function yn(n,t){return vn(n,t)<0?n:t}function gn(n,t){return vn(n,t)>0?n:t}function bn(n,t){return Un.cmp(n,t)}function wn(n,t){return Un.cmp(t,n)}function _n(n,t){return t>n?-1:n===t?0:1}function Pn(n,t){return n>t?-1:n===t?0:1}function xn(n,t){return n?t?function(){return n.apply(this,arguments)&&t.apply(this,arguments)}:n:t}function kn(){if($n.verno=Hn.version/10,$n._dbSchema=Ln={},Gn=y(Hn.objectStoreNames,0),0!==Gn.length){var n=Hn.transaction(on(Gn),"readonly");Gn.forEach(function(t){for(var e=n.objectStore(t),r=e.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new en(r,r||"",!1,!1,!!e.autoIncrement,r&&"string"!=typeof r,i),u=[],a=0;a<e.indexNames.length;++a){var s=e.index(e.indexNames[a]);r=s.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf(".");var c=new en(s.name,r,!!s.unique,!!s.multiEntry,!1,r&&"string"!=typeof r,i);u.push(c)}Ln[t]=new rn(t,o,u,{})}),ln([Wn],$n._transPromiseFactory,an(Ln),Zn,Ln)}}function Dn(n,t){for(var e=t.db.objectStoreNames,r=0;r<e.length;++r)for(var i=e[r],o=t.objectStore(i),u=0;u<o.indexNames.length;++u){var a=o.indexNames[u],s=o.index(a).keyPath,c="string"==typeof s?s:"["+y(s).join("+")+"]";if(n[i]){var f=n[i].idxByName[c];f&&(f.name=a)}}}function An(n){$n.on("blocked").fire(n),Tn.filter(function(n){return n.name===$n.name&&n!==$n&&!n._vcFired}).map(function(t){return t.on("versionchange").fire(n)})}var Fn=J.dependencies,Bn=h({addons:J.addons,autoOpen:!0,indexedDB:Fn.indexedDB,IDBKeyRange:Fn.IDBKeyRange},e),Mn=Bn.addons,Rn=Bn.autoOpen,Un=Bn.indexedDB,qn=Bn.IDBKeyRange,Ln=this._dbSchema={},Vn=[],Gn=[],Wn={},zn={},Hn=null,Jn=!0,Xn=null,Yn=!1,Qn="readonly",Zn="readwrite",$n=this,nt=[],tt=!0,et=!!un(Un);this.version=function(n){if(Hn||Yn)throw new mn.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var t=Vn.filter(function(t){return t._cfg.version===n})[0];return t?t:(t=new c(n),Vn.push(t),Vn.sort(fn),t)},h(c.prototype,{stores:function(n){this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,n):n;var t={};Vn.forEach(function(n){h(t,n._cfg.storesSource)});var e=this._cfg.dbschema={};return this._parseStoresSpec(t,e),Ln=$n._dbSchema=e,hn([Wn,$n,zn]),ln([zn],R,an(e),Zn,e),ln([Wn,$n,this._cfg.tables],$n._transPromiseFactory,an(e),Zn,e,!0),Gn=an(e),this},upgrade:function(n){var t=this;return Nn(function(){n($n._createTransaction(Zn,an(t._cfg.dbschema),t._cfg.dbschema))}),this._cfg.contentUpgrade=n,this},_parseStoresSpec:function(n,t){an(n).forEach(function(e){if(null!==n[e]){var r={},i=pn(n[e]),o=i.shift();if(o.multi)throw new mn.Schema("Primary key cannot be multi-valued");o.keyPath&&S(r,o.keyPath,o.auto?0:o.keyPath),i.forEach(function(n){if(n.auto)throw new mn.Schema("Only primary key can be marked as autoIncrement (++)");if(!n.keyPath)throw new mn.Schema("Index must have a name and cannot be an empty string");S(r,n.keyPath,n.compound?n.keyPath.map(function(){return""}):"")}),t[e]=new rn(e,o,i,r)}})}}),this._allTables=Wn,this._tableFactory=function(n,t,e){return n===Qn?new U(t.name,e,t,Y):new q(t.name,e,t)},this._createTransaction=function(n,t,e,r){return new z(n,t,e,r)},this._transPromiseFactory=function(t,e,r){if(!Jn||M.PSD&&M.PSD.letThrough){var i=$n._createTransaction(t,e,Ln);return i._promise(t,function(n,t){i.error(function(n){$n.on("error").fire(n)}),M.newPSD(function(){M.PSD.trans=i,r(function(t){i.complete(function(){n(t)})},t,i)})})}if(!Yn&&!Rn)return k(new mn.DatabaseClosed);var o=new M(function(n,i){nt.push({resume:function(){var u=$n._transPromiseFactory(t,e,r);o.onuncatched=u.onuncatched,u.then(n,i)}})});return Rn&&!Yn&&$n.open()["catch"](n),o},this._whenReady=function(t){if(!Kn&&Jn&&(!M.PSD||!M.PSD.letThrough)){if(!Yn){if(!Rn)return k(new mn.DatabaseClosed);$n.open()["catch"](n)}return new M(function(n,e){nt.push({resume:function(){t(n,e)}})})}return new M(t)},this.verno=0,this.open=function(){return Hn?M.resolve($n):Yn?new M(function(n,t){return $n._whenReady(function(){n($n)},function(n){t(n)})}):(Xn=null,Yn=!0,Jn=!0,new M(function(n,e){function r(n){try{i.transaction.abort()}catch(t){}if(Hn)try{Hn.close()}catch(t){}Hn=null,Yn=!1,Xn=K(n),Jn=!1,e(Xn),B()}Kn&&n();var i;try{if(Vn.length>0&&(tt=!1),!Un)throw new mn.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using Safari, make sure to include indexedDB polyfill.");if(i=tt?Un.open(t):Un.open(t,Math.round(10*$n.verno)),!i)throw new mn.MissingAPI("IndexedDB API not available");i.onerror=Z(r,["opening database",t]),i.onblocked=An,i.onupgradeneeded=X(function(n){if(tt&&!$n._allowEmptyDB){i.onerror=function(n){n.preventDefault()},i.transaction.abort(),i.result.close();var e=Un.deleteDatabase(t);e.onsuccess=e.onerror=function(){r(new mn.NoSuchDatabase("Database "+t+" doesnt exist"))}}else{i.transaction.onerror=Z(r);var o=n.oldVersion>Math.pow(2,62)?0:n.oldVersion;g(o/10,i.transaction,r,i)}},r),i.onsuccess=X(function(){if(Yn=!1,Hn=i.result,tt)kn();else if(Hn.objectStoreNames.length>0)try{Dn(Ln,Hn.transaction(on(Hn.objectStoreNames),Qn))}catch(e){}Hn.onversionchange=function(n){$n._vcFired=!0,$n.on("versionchange").fire(n)},et||nn(function(n){return-1===n.indexOf(t)?n.push(t):void 0}),M.newPSD(function(){function t(){Jn=!1,B(),n()}M.PSD.letThrough=!0;try{var e=$n.on.ready.fire();e&&"function"==typeof e.then?e.then(t,function(n){Hn.close(),Hn=null,r(n)}):w(t)}catch(i){r(i)}})},r)}catch(o){r(o)}}).then(function(){return Tn.push($n),$n}))},this.close=function(){var n=Tn.indexOf($n);n>=0&&Tn.splice(n,1),Hn?(Hn.close(),Hn=null,Rn=!1,Jn&&B(),Jn=!1,Xn=new mn.DatabaseClosed):Yn&&$n.on("ready",function(){return M.reject(new mn.DatabaseClosed)})},this["delete"]=function(){var n=arguments;return new M(function(e,r){function i(){$n.close();var n=Un.deleteDatabase(t);n.onsuccess=function(){et||nn(function(n){var e=n.indexOf(t);return e>=0?n.splice(e,1):void 0}),e()},n.onerror=Z(r,["deleting",t]),n.onblocked=An}if(n.length>0)throw new mn.InvalidArgument("Arguments not allowed in db.delete()");Yn?nt.push({resume:i}):i()})},this.backendDB=function(){return Hn},this.isOpen=function(){return null!==Hn},this.hasFailed=function(){return null!==Xn},this.dynamicallyOpened=function(){return tt},this.name=t,p(this,"tables",{get:function(){return an(Wn).map(function(n){return Wn[n]})}}),this.on=F(this,"error","populate",{blocked:[f,n],ready:[l,n],versionchange:[f,n]}),this.on.ready.subscribe=m(this.on.ready.subscribe,function(n){return function(t,e){function r(){return e||$n.on.ready.unsubscribe(r),t.apply(this,arguments)}n.call(this,r),$n.isOpen()&&(Jn?nt.push({resume:r}):r())}}),Nn(function(){$n.on("populate").fire($n._createTransaction(Zn,Gn,Ln)),$n.on("error").fire(new Error)}),this.transaction=function(n,t,e){function r(t,r){var o=null,u=!0;try{if(a)throw a;o=$n._createTransaction(n,s,Ln,i);var c=s.map(function(n){return o.tables[n]});c.push(o);var f,l=0;M.newPSD(function(){M.PSD.trans=o,o.scopeFunc=e,i&&(o.idbtrans=i.idbtrans,o._promise=m(o._promise,function(n){return function(t,e,r){function i(n){return function(t){var e;return M._rootExec(function(){e=n(t),M._tickFinalize(function(){0===--l&&o.active&&(o.active=!1,o.on.complete.fire())})}),e}}return++l,n.call(this,t,function(n,t,r){return e(i(n),i(t),r)},r)}})),o.complete(function(){t(f)}),o.error(function(n){function t(){var t=r(n);i||t||$n.on.error.fire(n)}o.idbtrans&&(o.idbtrans.onerror=$);try{o.abort()}catch(e){}i&&(i.active=!1,i.on.error.fire(n)),u?w(t):t()}),M._rootExec(function(){if(f=e.apply(o,c))if("function"==typeof f.next&&"function"==typeof f["throw"])f=tn(f);else if("function"==typeof f.then&&!f.hasOwnProperty("_PSD"))throw new mn.IncompatiblePromise})}),(!o.idbtrans||i&&0===l)&&o._nop()}catch(h){o&&o.idbtrans&&(o.idbtrans.onerror=$),o&&o.abort(),i&&i.on.error.fire(h),w(function(){r(h)||$n.on("error").fire(h)})}u=!1}t=y(arguments,1,arguments.length-1),e=arguments[arguments.length-1];var i=M.PSD&&M.PSD.trans;i&&i.db===$n&&-1===n.indexOf("!")||(i=null);var o=-1!==n.indexOf("?");n=n.replace("!","").replace("?","");var u=sn(t[0])?t.reduce(function(n,t){return n.concat(t)}):t,a=null,s=u.map(function(n){return"string"==typeof n?n:(n instanceof U||(a=a||new TypeError("Invalid type. Arguments following mode must be instances of Table or String")),n.name)});return"r"==n||n==Qn?n=Qn:"rw"==n||n==Zn?n=Zn:a=new mn.InvalidArgument("Invalid transaction mode: "+n),i&&(a||(i&&i.mode===Qn&&n===Zn&&(o?i=null:a=a||new mn.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY")),i&&s.forEach(function(n){i.tables.hasOwnProperty(n)||(o?i=null:a=a||new mn.SubTransaction("Table "+n+" not included in parent transaction. Parent Transaction function: "+i.scopeFunc.toString()))}))),i?i._promise(n,r,"lock"):$n._whenReady(r)},this.table=function(n){if(Kn&&tt)return new q(n);if(!Wn.hasOwnProperty(n))throw new mn.InvalidTable("Table "+n+" does not exist");return Wn[n]},d(U.prototype,function(){function n(){throw new mn.ReadOnly("Current Transaction is READONLY")}return{_trans:function(n,t,e){return this._tpf(n,[this.name],t,e)},_idbstore:function(n,t,e){if(Kn)return new M(t);var r=this;return this._tpf(n,[this.name],function(n,e,i){t(n,e,i.idbtrans.objectStore(r.name),i)},e)},get:function(n,t){var e=this;return this._idbstore(Qn,function(t,r,i){Kn&&t(e.schema.instanceTemplate);var o=i.get(n);o.onerror=Z(r,["getting",n,"from",e.name]),o.onsuccess=function(){t(e.hook.reading.fire(o.result))}}).then(t)},where:function(n){return new H(this,n)},count:function(n){return this.toCollection().count(n)},offset:function(n){return this.toCollection().offset(n)},limit:function(n){return this.toCollection().limit(n)},reverse:function(){return this.toCollection().reverse()},filter:function(n){return this.toCollection().and(n)},each:function(n){return this.toCollection().each(n)},toArray:function(n){return this.toCollection().toArray(n)},orderBy:function(n){return new this._collClass(new H(this,n))},toCollection:function(){return new this._collClass(new H(this))},mapToClass:function(n,t){this.schema.mappedClass=n;var e=Object.create(n.prototype);t&&Q(e,t),this.schema.instanceTemplate=e;var r=function(t){if(!t)return t;var e=Object.create(n.prototype);for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),n},defineClass:function(n){
return this.mapToClass(J.defineClass(n),n)},add:n,put:n,"delete":n,clear:n,update:n}}),v(q).from(U).extend(function(){return{bulkDelete:function(t){return this.hook.deleting.fire===n?this._idbstore(Zn,function(e,r,i,o){e(W(i,o,t,!1,n))}):this.where(":id").anyOf(t)["delete"]().then(function(){})},bulkPut:function(t,e){var r=this;return this._idbstore(Zn,function(i,o,u,a){if(!u.keyPath&&!r.schema.primKey.auto&&!e)throw new mn.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(u.keyPath&&e)throw new mn.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new mn.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return i();var s,c,f=function(n){0===l.length?i(n):o(new N(r.name+".bulkPut(): "+l.length+" of "+h+" operations failed",l))},l=[],h=t.length,d=a.tables[r.name];if(r.hook.creating.fire===n&&r.hook.updating.fire===n){c=L(l);for(var p=0,v=t.length;v>p;++p)s=e?u.put(t[p],e[p]):u.put(t[p]),s.onerror=c;s.onerror=L(l,f),s.onsuccess=G(f)}else{var y=e||u.keyPath&&t.map(function(n){return D(n,u.keyPath)}),m=y&&y.reduce(function(n,e,r){return null!=e&&(n[e]=t[r]),n},{}),g=y?d.where(":id").anyOf(y.filter(function(n){return null!=n})).modify(function(){this.value=m[this.primKey],m[this.primKey]=null})["catch"](C,function(n){l=n.failures}).then(function(){for(var n=[],r=e&&[],i=y.length-1;i>=0;--i){var o=y[i];(null==o||m[o])&&(n.push(t[i]),e&&r.push(o),null!=o&&(m[o]=null))}return n.reverse(),e&&r.reverse(),d.bulkAdd(n,r)}).then(function(n){var t=y[y.length-1];return null!=t?t:n}):d.bulkAdd(t);g.then(f)["catch"](N,function(n){l=l.concat(n.failures),f()})["catch"](o)}},"locked")},bulkAdd:function(t,e){var r=this,i=this.hook.creating.fire;return this._idbstore(Zn,function(o,u,a,s){function c(n){0===d.length?o(n):u(new N(r.name+".bulkAdd(): "+d.length+" of "+p+" operations failed",d))}if(!a.keyPath&&!r.schema.primKey.auto&&!e)throw new mn.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&e)throw new mn.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new mn.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return o();var f,l,h,d=[],p=t.length;if(i!==n){var v=a.keyPath,y={onerror:null,onsuccess:null};l=L(d,null),h=G(null,!0),_(function(){for(var n=0,r=t.length;r>n;++n){var o=e&&e[n],u=t[n],c=e?o:v?D(u,v):void 0,d=i.call(y,c,u,s);null==c&&null!=d&&(v?(u=E(u),S(u,v,d)):o=d),f=null!=o?a.add(u,o):a.add(u),y.onerror&&(f._err=y.onerror),y.onsuccess&&(f._suc=y.onsuccess),r-1>n&&(f.onerror=l,y.onsuccess&&(f.onsuccess=h),y.onerror=null,y.onsuccess=null)}},function(n){throw y.onerror&&y.onerror(n),n}),f.onerror=L(d,c),f.onsuccess=G(c,!0)}else{l=L(d);for(var m=0,g=t.length;g>m;++m)f=e?a.add(t[m],e[m]):a.add(t[m]),f.onerror=l;f.onerror=L(d,c),f.onsuccess=G(c)}})},add:function(t,e){var r=this,i=this.hook.creating.fire;return this._idbstore(Zn,function(o,u,a,s){var c={onsuccess:null,onerror:null};if(i!==n){var f=null!=e?e:a.keyPath?D(t,a.keyPath):void 0,l=i.call(c,f,t,s);null==f&&null!=l&&(a.keyPath?S(t,a.keyPath,l):e=l)}try{var h=null!=e?a.add(t,e):a.add(t),d=M.PSD;h.onerror=Z(function(n){return c.onerror&&M.usePSD(d,c.onerror.bind(c,n)),u(n)},["adding",t,"into",r.name]),h.onsuccess=function(n){var e=a.keyPath;e&&S(t,e,n.target.result),c.onsuccess&&M.usePSD(d,c.onsuccess.bind(c,n.target.result)),o(h.result)}}catch(p){throw c.onerror&&c.onerror(p),p}})},put:function(t,e){var r=this,i=this.hook.creating.fire,o=this.hook.updating.fire;return i!==n||o!==n?this._trans(Zn,function(n,i,o){var u=void 0!==e?e:r.schema.primKey.keyPath&&D(t,r.schema.primKey.keyPath);null==u?o.tables[r.name].add(t).then(n,i):(o._lock(),t=E(t),o.tables[r.name].where(":id").equals(u).modify(function(){this.value=t}).then(function(n){return 0===n?o.tables[r.name].add(t,e):u})["finally"](function(){o._unlock()}).then(n,i))}):this._idbstore(Zn,function(n,i,o){var u=void 0!==e?o.put(t,e):o.put(t);u.onerror=Z(i,["putting",t,"into",r.name]),u.onsuccess=function(e){var r=o.keyPath;r&&S(t,r,e.target.result),n(u.result)}})},"delete":function(n){return this.hook.deleting.subscribers.length?this.where(":id").equals(n)["delete"]():this._idbstore(Zn,function(t,e,r){var i=r["delete"](n);i.onerror=Z(e,["deleting",n,"from",r.name]),i.onsuccess=function(){t(i.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection()["delete"]():this._idbstore(Zn,function(n,t,e){var r=e.clear();r.onerror=Z(t,["clearing",e.name]),r.onsuccess=function(){n(r.result)}})},update:function(n,t){if("object"!=typeof t||sn(t))throw new mn.InvalidArgument("db.update(keyOrObject, modifications). modifications must be an object.");if("object"!=typeof n||sn(n))return this.where(":id").equals(n).modify(t);an(t).forEach(function(e){S(n,e,t[e])});var e=D(n,this.schema.primKey.keyPath);return void 0===e&&M.reject(new mn.InvalidArgument("Given object does not contain its primary key")),this.where(":id").equals(e).modify(t)}}}),d(z.prototype,{_lock:function(){return++this._reculock,1===this._reculock&&M.PSD&&(M.PSD.lockOwnerFor=this),this},_unlock:function(){if(0===--this._reculock)for(M.PSD&&(M.PSD.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{n()}catch(t){}}return this},_locked:function(){return this._reculock&&(!M.PSD||M.PSD.lockOwnerFor!==this)},_nop:function(n){this.tables[this.storeNames[0]].get(0).then(n)},_promise:function(n,t,e){var r=this;return M.newPSD(function(){var i;return r._locked()?i=new M(function(i,o){r._blockedFuncs.push(function(){r._promise(n,t,e).then(i,o)})}):(i=r.active?new M(function(i,o){if(!r.idbtrans&&n){if(!Hn)throw!Xn||["DatabaseClosedError","MissingAPIError"].indexOf(Xn.name)>=0?Xn:new mn.OpenFailed(Xn);var u=r.idbtrans=Hn.transaction(on(r.storeNames),r.mode);u.onerror=function(n){r.on("error").fire(n&&n.target.error),n.preventDefault(),r.abort()},u.onabort=function(n){w(function(){r.on("error").fire(new mn.Abort("Transaction aborted for unknown reason"))}),r.active=!1,r.on("abort").fire(n)},u.oncomplete=function(n){r.active=!1,r.on("complete").fire(n)}}e&&r._lock();try{t(i,o,r)}catch(a){var s=x(K(a));J.ignoreTransaction(function(){r.on("error").fire(s)}),r.abort(),o(s)}}):M.reject(x(new mn.TransactionInactive("Transaction is inactive. Original Scope Function Source: "+r.scopeFunc.toString()))),r.active&&e&&i["finally"](function(){r._unlock()})),i.onuncatched=function(n){J.ignoreTransaction(function(){r.on("error").fire(n)}),r.abort()},i})},complete:function(n){return this.on("complete",n)},error:function(n){return this.on("error",n)},abort:function(){if(this.idbtrans&&this.active)try{this.active=!1,this.idbtrans.abort(),this.on.error.fire(new mn.Abort("Transaction Aborted"))}catch(n){}},table:function(n){if(!this.tables.hasOwnProperty(n))throw new mn.InvalidTable("Table "+n+" not in transaction");return this.tables[n]}}),d(H.prototype,function(){function n(n,t,e){var r=n instanceof H?new n._ctx.collClass(n):n;try{throw e?new e(t):new TypeError(t)}catch(i){r._ctx.error=i}return r}function t(n){return new n._ctx.collClass(n,function(){return qn.only("")}).limit(0)}function e(n){return y(1===n.length&&sn(n[0])?n[0]:n)}function r(n){return"next"===n?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function i(n){return"next"===n?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function o(n,t,e,r,i,o){for(var u=Math.min(n.length,r.length),a=-1,s=0;u>s;++s){var c=t[s];if(c!==r[s])return i(n[s],e[s])<0?n.substr(0,s)+e[s]+e.substr(s+1):i(n[s],r[s])<0?n.substr(0,s)+r[s]+e.substr(s+1):a>=0?n.substr(0,a)+t[a]+e.substr(a+1):null;i(n[s],c)<0&&(a=s)}return u<r.length&&"next"===o?n+e.substr(n.length):u<n.length&&"prev"===o?n.substr(0,e.length):0>a?null:n.substr(0,a)+r[a]+e.substr(a+1)}function u(n,t,e,u){function a(n){s=r(n),c=i(n),f="next"===n?_n:Pn;var t=e.map(function(n){return{lower:c(n),upper:s(n)}}).sort(function(n,t){return f(n.lower,t.lower)});l=t.map(function(n){return n.upper}),h=t.map(function(n){return n.lower}),d=n,p="next"===n?"":u}var s,c,f,l,h,d,p,v=e.length;a("next");var y=new n._ctx.collClass(n,function(){return qn.bound(l[0],h[v-1]+u)});y._ondirectionchange=function(n){a(n)};var m=0;return y._addAlgorithm(function(n,e,r){var i=n.key;if("string"!=typeof i)return!1;var u=c(i);if(t(u,h,m))return!0;for(var a=null,s=m;v>s;++s){var y=o(i,u,l[s],h[s],f,d);null===y&&null===a?m=s+1:(null===a||f(a,y)>0)&&(a=y)}return e(null!==a?function(){n["continue"](a+p)}:r),!1}),y}return{between:function(e,r,i,o){i=i!==!1,o=o===!0;try{return vn(e,r)>0||0===vn(e,r)&&(i||o)&&(!i||!o)?t(this):new this._ctx.collClass(this,function(){return qn.bound(e,r,!i,!o)})}catch(u){return n(this,In)}},equals:function(n){return new this._ctx.collClass(this,function(){return qn.only(n)})},above:function(n){return new this._ctx.collClass(this,function(){return qn.lowerBound(n,!0)})},aboveOrEqual:function(n){return new this._ctx.collClass(this,function(){return qn.lowerBound(n)})},below:function(n){return new this._ctx.collClass(this,function(){return qn.upperBound(n,!0)})},belowOrEqual:function(n){return new this._ctx.collClass(this,function(){return qn.upperBound(n)})},startsWith:function(t){return"string"!=typeof t?n(this,En):this.between(t,t+Sn,!0,!0)},startsWithIgnoreCase:function(t){return"string"!=typeof t?n(this,En):""===t?this.startsWith(t):u(this,function(n,t){return 0===n.indexOf(t[0])},[t],Sn)},equalsIgnoreCase:function(t){return"string"!=typeof t?n(this,En):u(this,function(n,t){return n===t[0]},[t],"")},anyOfIgnoreCase:function(){var r=e(arguments);return 0===r.length?t(this):r.every(function(n){return"string"==typeof n})?u(this,function(n,t){return-1!==t.indexOf(n)},r,""):n(this,"anyOfIgnoreCase() only works with strings")},startsWithAnyOfIgnoreCase:function(){var r=e(arguments);return 0===r.length?t(this):r.every(function(n){return"string"==typeof n})?u(this,function(n,t){return t.some(function(t){return 0===n.indexOf(t)})},r,Sn):n(this,"startsWithAnyOfIgnoreCase() only works with strings")},anyOf:function(){var r=e(arguments),i=bn;try{r.sort(i)}catch(o){return n(this,In)}if(0===r.length)return t(this);var u=new this._ctx.collClass(this,function(){return qn.bound(r[0],r[r.length-1])});u._ondirectionchange=function(n){i="next"===n?bn:wn,r.sort(i)};var a=0;return u._addAlgorithm(function(n,t,e){for(var o=n.key;i(o,r[a])>0;)if(++a,a===r.length)return t(e),!1;return 0===i(o,r[a])?!0:(t(function(){n["continue"](r[a])}),!1)}),u},notEqual:function(n){return this.inAnyRange([[-(1/0),n],[n,On]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=e(arguments);if(0===t.length)return new this._ctx.collClass(this);try{t.sort(bn)}catch(r){return n(this,In)}var i=t.reduce(function(n,t){return n?n.concat([[n[n.length-1][1],t]]):[[-(1/0),t]]},null);return i.push([t[t.length-1],On]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(e,r){function i(n,t){for(var e=0,r=n.length;r>e;++e){var i=n[e];if(vn(t[0],i[1])<0&&vn(t[1],i[0])>0){i[0]=yn(i[0],t[0]),i[1]=gn(i[1],t[1]);break}}return e===r&&n.push(t),n}function o(n,t){return l(n[0],t[0])}function u(n){return!p(n)&&!v(n)}var a=this._ctx;if(0===e.length)return t(this);if(!e.every(function(n){return void 0!==n[0]&&void 0!==n[1]&&bn(n[0],n[1])<=0}))return n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",mn.InvalidArgument);var s,c=!r||r.includeLowers!==!1,f=r&&r.includeUppers===!0,l=bn;try{s=e.reduce(i,[]),s.sort(o)}catch(h){return n(this,In)}var d=0,p=f?function(n){return bn(n,s[d][1])>0}:function(n){return bn(n,s[d][1])>=0},v=c?function(n){return wn(n,s[d][0])>0}:function(n){return wn(n,s[d][0])>=0},y=p,m=new a.collClass(this,function(){return qn.bound(s[0][0],s[s.length-1][1],!c,!f)});return m._ondirectionchange=function(n){"next"===n?(y=p,l=bn):(y=v,l=wn),s.sort(o)},m._addAlgorithm(function(n,t,e){for(var r=n.key;y(r);)if(++d,d===s.length)return t(e),!1;return u(r)?!0:0===vn(r,s[d][1])||0===vn(r,s[d][0])?!1:(t(function(){l===bn?n["continue"](s[d][0]):n["continue"](s[d][1])}),!1)}),m},startsWithAnyOf:function(){var r=e(arguments);return r.every(function(n){return"string"==typeof n})?0===r.length?t(this):this.inAnyRange(r.map(function(n){return[n,n+Sn]})):n(this,"startsWithAnyOf() only works with strings")}}}),d(Y.prototype,function(){function n(n,t){n.filter=xn(n.filter,t)}function t(n,t){var e=n.replayFilter;n.replayFilter=e?function(){return xn(e(),t())}:t}function e(n,t){n.isMatch=xn(n.isMatch,t)}function r(n,t){if(n.isPrimKey)return t;var e=n.table.schema.idxByName[n.index];if(!e)throw new mn.Schema("KeyPath "+n.index+" on object store "+t.name+" is not indexed");return t.index(e.name)}function i(n,t){var e=r(n,t);return n.keysOnly&&"openKeyCursor"in e?e.openKeyCursor(n.range||null,n.dir+n.unique):e.openCursor(n.range||null,n.dir+n.unique)}function o(n,t,e,r,o){var u=n.replayFilter?xn(n.filter,n.replayFilter()):n.filter;n.or?!function(){function a(){2===++f&&e()}function s(n,e,i){if(!u||u(e,i,a,r)){var o=e.primaryKey.toString();c.hasOwnProperty(o)||(c[o]=!0,t(n,e,i))}}var c={},f=0;n.or._iterate(s,a,r,o),dn(i(n,o),n.algorithm,s,a,r,!n.keysOnly&&n.valueFilter)}():dn(i(n,o),xn(n.algorithm,u),t,e,r,!n.keysOnly&&n.valueFilter)}function u(n){return n.table.schema.instanceTemplate}return{_read:function(n,t){var e=this._ctx;return e.error?e.table._trans(null,function(n,t){t(e.error)}):e.table._idbstore(Qn,n).then(t)},_write:function(n){var t=this._ctx;return t.error?t.table._trans(null,function(n,e){e(t.error)}):t.table._idbstore(Zn,n,"locked")},_addAlgorithm:function(n){var t=this._ctx;t.algorithm=xn(t.algorithm,n)},_iterate:function(n,t,e,r){return o(this._ctx,n,t,e,r)},clone:function(n){var t=Object.create(this.constructor.prototype),e=Object.create(this._ctx);return n&&h(e,n),t._ctx=e,t},raw:function(){return this._ctx.valueFilter=null,this},each:function(n){var t=this._ctx;return Kn&&n(u(t)),this._read(function(e,r,i){o(t,n,e,r,i)})},count:function(n){if(Kn)return M.resolve(0).then(n);var t=this,e=this._ctx;if(e.filter||e.algorithm||e.or||e.replayFilter){var i=0;return this._read(function(n,t,r){o(e,function(){return++i,!1},function(){n(i)},t,r)},n)}return this._read(function(n,i,o){var u=r(e,o),a=e.range?u.count(e.range):u.count();a.onerror=Z(i,["calling","count()","on",t.name]),a.onsuccess=function(t){n(t.target.result)}},n)},sortBy:function(n,t){function e(n,t){return t?e(n[i[t]],t-1):n[o]}function r(n,t){var r=e(n,u),i=e(t,u);return i>r?-a:r>i?a:0}var i=n.split(".").reverse(),o=i[0],u=i.length-1,a="next"===this._ctx.dir?1:-1;return this.toArray(function(n){return n.sort(r)}).then(t)},toArray:function(n){var t=this._ctx;return this._read(function(n,e,r){Kn&&n([u(t)]);var i=[];o(t,function(n){i.push(n)},function(){n(i)},e,r)},n)},offset:function(n){var e=this._ctx;return 0>=n?this:(e.offset+=n,e.or||e.algorithm||e.filter||e.replayFilter?t(e,function(){var t=n;return function(){return--t<0}}):t(e,function(){var t=n;return function(n,e){return 0===t?!0:1===t?(--t,!1):(e(function(){n.advance(t),t=0}),!1)}}),this)},limit:function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),t(this._ctx,function(){var t=n;return function(n,e,r){return--t<=0&&e(r),t>=0}}),this},until:function(t,e){var r=this._ctx;return Kn&&t(u(r)),n(this._ctx,function(n,r,i){return t(n.value)?(r(i),e):!0}),this},first:function(n){return this.limit(1).toArray(function(n){return n[0]}).then(n)},last:function(n){return this.reverse().first(n)},filter:function(t){return Kn&&t(u(this._ctx)),n(this._ctx,function(n){return t(n.value)}),e(this._ctx,t),this},and:function(n){return this.filter(n)},or:function(n){return new H(this._ctx.table,n,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(n){var t=this._ctx;return Kn&&n(D(u(this._ctx),this._ctx.index?this._ctx.table.schema.idxByName[this._ctx.index].keyPath:this._ctx.table.schema.primKey.keyPath)),t.keysOnly=!t.isMatch,this.each(function(t,e){n(e.key,e)})},eachUniqueKey:function(n){return this._ctx.unique="unique",this.eachKey(n)},keys:function(n){var t=this._ctx;t.keysOnly=!t.isMatch;var e=[];return Kn?new M(this.eachKey.bind(this)).then(function(n){return[n]}).then(n):this.each(function(n,t){e.push(t.key)}).then(function(){return e}).then(n)},uniqueKeys:function(n){return this._ctx.unique="unique",this.keys(n)},firstKey:function(n){return this.limit(1).keys(function(n){return n[0]}).then(n)},lastKey:function(n){return this.reverse().firstKey(n)},distinct:function(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var r={};return n(this._ctx,function(n){var t=n.primaryKey.toString(),e=r.hasOwnProperty(t);return r[t]=!0,!e}),this}}}),v(cn).from(Y).extend({modify:function(t){var e=this,r=this._ctx,i=r.table.hook,o=i.updating.fire,u=i.deleting.fire;return Kn&&"function"==typeof t&&t.call({value:r.table.schema.instanceTemplate},r.table.schema.instanceTemplate),this._write(function(i,a,s,c){function f(n,t){function e(n){return P.push(n),x.push(i.primKey),i.onerror&&M.newPSD(function(){M.PSD.trans=c,i.onerror(n)}),d(),!0}k=t.primaryKey;var i={primKey:t.primaryKey,value:n,onsuccess:null,onerror:null};if(p.call(i,n,i)!==!1){var o=!i.hasOwnProperty("value");++g,_(function(){var u=o?t["delete"]():t.update(i.value);u.onerror=Z(e,o?["deleting",n,"from",r.table.name]:["modifying",n,"on",r.table.name]),u.onsuccess=function(){i.onsuccess&&M.newPSD(function(){M.PSD.trans=c,i.onsuccess(i.value)}),++b,d()}},e)}else i.onsuccess&&i.onsuccess(i.value)}function l(n){return n&&(P.push(n),x.push(k)),a(new C("Error modifying one or more objects",P,b,x))}function d(){w&&b+P.length===g&&(P.length>0?l():i(b))}var p;if("function"==typeof t)p=o===n&&u===n?t:function(n){var e=E(n);if(t.call(this,n,this)===!1)return!1;if(this.hasOwnProperty("value")){var r=T(e,this.value),i=o.call(this,r,this.primKey,e,c);i&&(n=this.value,an(i).forEach(function(t){S(n,t,i[t])}))}else u.call(this,this.primKey,n,c)};else if(o===n){var v=an(t),y=v.length;p=function(n){for(var e=!1,r=0;y>r;++r){var i=v[r],o=t[i];D(n,i)!==o&&(S(n,i,o),e=!0)}return e}}else{var m=t;t=I(m),p=function(n){var e=!1,r=o.call(this,t,this.primKey,E(n),c);return r&&h(t,r),an(t).forEach(function(r){var i=t[r];D(n,r)!==i&&(S(n,r,i),e=!0)}),r&&(t=I(m)),e}}var g=0,b=0,w=!1,P=[],x=[],k=null;e.clone().raw()._iterate(f,function(){w=!0,d()},l,s)})},"delete":function(){var t=this,e=this._ctx,r=e.range,i=e.table.hook.deleting.fire,o=i!==n;if(!o&&!e.or&&!e.algorithm&&!e.filter&&!e.replayFilter&&(e.isPrimKey&&!Cn||!r))return this._write(function(n,t,i){var o=Z(t,["deleting range from",e.table.name]),u=r?i.count(r):i.count();u.onerror=o,u.onsuccess=function(){var e=u.result;_(function(){var t=r?i["delete"](r):i.clear();t.onerror=o,t.onsuccess=function(){return n(e)}},function(n){return t(K(n))})}});var u=o?2e3:1e4;return this._write(function(n,r,a,s){var c=0,f=Object.create(e.table);f._tpf=s._tpf;var l=t.clone({table:f,keysOnly:!e.isMatch&&!o}).distinct().limit(u).raw(),h=[],d=function(){return l.each(o?function(n,t){h.push([t.primaryKey,t.value])}:function(n,t){h.push(t.primaryKey)}).then(function(){return o?h.sort(function(n,t){return bn(n[0],t[0])}):h.sort(bn),W(a,s,h,o,i)}).then(function(){var n=h.length;return c+=n,h=[],u>n?c:d()})};n(d())})}}),h(this,{Collection:Y,Table:U,Transaction:z,Version:c,WhereClause:H,WriteableCollection:cn,WriteableTable:q}),o(),Mn.forEach(function(n){n($n)})}function X(n,t){var e=M.PSD;return function(){var r=M.PSD;M.PSD=e;try{n.apply(this,arguments)}catch(i){t(i)}finally{M.PSD=r}}}function Y(n){if("function"==typeof n)return new n;if(sn(n))return[Y(n[0])];if(n&&"object"==typeof n){var t={};return Q(t,n),t}return n}function Q(n,t){return an(t).forEach(function(e){var r=Y(t[e]);n[e]=r}),n}function Z(n,t){return function(e){var r=e&&e.target.error||new Error("");if(t){var i=" occurred when "+t.map(function(n){switch(typeof n){case"function":return n();case"string":return n;default:return JSON.stringify(n)}}).join(" ");r.message&&r.message!=r.name&&(i+=". "+r.message),r.name?r=K(r,r.name+i):r+=i}return n(r),e&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()),!1}}function $(n){n.preventDefault()}function nn(n){var t,e=J.dependencies.localStorage;if(!e)return n([]);try{t=JSON.parse(e.getItem("Dexie.DatabaseNames")||"[]")}catch(r){t=[]}n(t)&&e.setItem("Dexie.DatabaseNames",JSON.stringify(t))}function tn(n){function t(n){return function(t){var r=n(t),i=r.value;return r.done?i:i&&"function"==typeof i.then?i.then(o,u):Array.isArray(i)?e(i,0):o(i)}}function e(n,t){if(t===n.length)return o(n);var r=n[t];return r.constructor&&"function"==typeof r.constructor.all?r.constructor.all(n).then(o,u):e(n,t+1)}var r=function(t){return n.next(t)},i=function(t){return n["throw"](t)},o=t(r),u=t(i);return t(r)()}function en(n,t,e,r,i,o,u){this.name=n,this.keyPath=t,this.unique=e,this.multi=r,this.auto=i,this.compound=o,this.dotted=u;var a="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(e?"&":"")+(r?"*":"")+(i?"++":"")+a}function rn(n,t,e,r){this.name=n,this.primKey=t||new en,this.indexes=e||[new en],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=e.reduce(function(n,t){return n[t.name]=t,n},{})}function on(n){return 1===n.length?n[0]:n}function un(n){var t=n&&(n.getDatabaseNames||n.webkitGetDatabaseNames);return t&&t.bind(n)}var an=Object.keys,sn=Array.isArray,cn="undefined"!=typeof self?self:"undefined"!=typeof window?window:t,fn=[].slice,ln=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","IncompatiblePromise"],hn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],dn=ln.concat(hn),pn={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",IncompatiblePromise:"Incompatible Promise used in transaction scope. See http://tinyurl.com/znyqjqc"};v(A).from(Error).extend({dump:function(){return P(this)}}),v(C).from(A),v(N).from(A);var vn=dn.reduce(function(n,t){return n[t]=t+"Error",n},{}),yn=A,mn=dn.reduce(function(n,t){function e(n,e){this.name=r,"string"==typeof n?(this.message=n,this.inner=e||null):"object"==typeof n?(this.message=n.name+" "+n.message,this.inner=n):(this.message=pn[t],this.inner=null)}var r=t+"Error";return v(e).from(yn),n[t]=e,n},{});mn.Syntax=SyntaxError,mn.Type=TypeError,mn.Range=RangeError;var gn=hn.reduce(function(n,t){return n[t+"Error"]=mn[t],n},{}),bn=dn.reduce(function(n,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(n[t+"Error"]=mn[t]),n},{});bn.ModifyError=C,bn.DexieError=A,bn.BulkError=N;var wn=cn.setImmediate||function(n){var t=y(arguments,1);setTimeout(function(){n.apply(cn,t)},0)};g(function(){wn=_n=Dn=function(n){var t=arguments;setTimeout(function(){n.apply(cn,y(t,1))},0)}});var _n=wn,Pn=!0,xn=[],kn=[],Dn=function(n){xn.push([n,y(arguments,1)])};M.all=function(){var n=y(1===arguments.length&&sn(arguments[0])?arguments[0]:arguments);return new M(function(t,e){function r(o,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,function(n){r(o,n)},e)}n[o]=u,0===--i&&t(n)}catch(s){e(s)}}if(0===n.length)return t([]);for(var i=n.length,o=0;o<n.length;o++)r(o,n[o])})},M.prototype.then=function(n,t){var e=this,r=new M(function(r,i){null===e._state?R(e,new W(n,t,r,i)):_n(R,e,new W(n,t,r,i))});return r._PSD=this._PSD,r.onuncatched=this.onuncatched,r._parent=this,r},M.prototype._then=function(t,e){R(this,new W(t,e,n,n))},M.prototype["catch"]=function(n){if(1===arguments.length)return this.then(null,n);var t=arguments[0],e=arguments[1];return"function"==typeof t?this.then(null,function(n){return n instanceof t?e(n):M.reject(n)}):this.then(null,function(n){return n&&n.name===t?e(n):M.reject(n)})},M.prototype["finally"]=function(n){return this.then(function(t){return n(),t},function(t){return n(),M.reject(t)})},M.prototype.onuncatched=null,M.resolve=function(n){if(n&&"function"==typeof n.then)return n;var t=new M(function(){});return t._state=!0,t._value=n,t},M.reject=function(n){var t=new M(function(){});return t._state=!1,t._value=n,t},M.race=function(n){return new M(function(t,e){n.map(function(n){n.then(t,e)})})},M.PSD=null,M.newPSD=function(n){var t=M.PSD;M.PSD=t?Object.create(t):{};try{return n()}finally{M.PSD=t}},M.usePSD=function(n,t){var e=M.PSD;M.PSD=n;try{return t()}finally{M.PSD=e}},M._rootExec=U,M._tickFinalize=function(n){if(Pn)throw new Error("Not in a virtual tick");kn.push(n)},M.on=F(null,{error:[function(n,t){return t},H]});var Sn=String.fromCharCode(65535),On=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(n){return Sn}}(),In="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",En="String expected.",Tn=[],An="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),jn=An,Cn=An,Nn=function(){},Kn=!1;J["delete"]=function(n){var t=new J(n),e=t["delete"]();return e.onblocked=function(n){return t.on("blocked",n),this},e},J.exists=function(n){return new J(n).open().then(function(n){return n.close(),!0})["catch"](J.NoSuchDatabaseError,function(){return!1})},J.getDatabaseNames=function(n){return new M(function(n,t){var e=un(indexedDB);if(e){var r=e();r.onsuccess=function(t){n(y(t.target.result,0))},r.onerror=Z(t)}else nn(function(t){return n(t),!1})}).then(n)},J.defineClass=function(n){function t(t){t?h(this,t):Kn&&Q(this,n)}return t},J.applyStructure=Q,J.ignoreTransaction=function(n){return M.newPSD(function(){return M.PSD.trans=null,n()})},J.vip=function(n){return M.newPSD(function(){return M.PSD.letThrough=!0,n()})},J.async=function(n){return function(){try{var t=tn(n.apply(this,arguments));return t&&"function"==typeof t.then?t:J.Promise.resolve(t)}catch(e){return J.Promise.reject(e)}}},J.spawn=function(n,t,e){try{var r=tn(n.apply(e,t||[]));return r&&"function"==typeof r.then?r:J.Promise.resolve(r)}catch(i){return J.Promise.reject(i)}},p(J,"currentTransaction",{get:function(){return M.PSD&&M.PSD.trans||null}}),J.Promise=M,J.derive=v,J.extend=h,J.extendProto=d,J.override=m,J.Events=J.events=F,J.getByKeyPath=D,J.setByKeyPath=S,J.delByKeyPath=O,J.shallowClone=I,J.deepClone=E,J.addons=[],J.fakeAutoComplete=Nn,J.asap=w,J.maxKey=On,J.connections=Tn,J.dump=P,h(J,bn),J.MultiModifyError=J.ModifyError,J.errnames=vn,J.IndexSpec=en,J.TableSchema=rn;var Fn=cn.idbModules&&cn.idbModules.shimIndexedDB?cn.idbModules:{};return J.dependencies={indexedDB:Fn.shimIndexedDB||cn.indexedDB||cn.mozIndexedDB||cn.webkitIndexedDB||cn.msIndexedDB,IDBKeyRange:Fn.IDBKeyRange||cn.IDBKeyRange||cn.webkitIDBKeyRange},_(function(){J.dependencies.localStorage=null!=("undefined"!=typeof chrome&&null!==chrome?chrome.storage:void 0)?null:cn.localStorage}),J.semVer="1.3.6",J.version=J.semVer.split(".").map(function(n){return parseInt(n)}).reduce(function(n,t,e){return n+t/Math.pow(10,2*e)}),g(function(){J.fakeAutoComplete=Nn=g,J.fake=Kn=!0}),J["default"]=J,J})}).call(t,function(){return this}(),e(1).setImmediate)},function(n,t){function e(){c=!1,u.length?s=u.concat(s):f=-1,s.length&&r()}function r(){if(!c){var n=setTimeout(e);c=!0;for(var t=s.length;t;){for(u=s,s=[];++f<t;)u&&u[f].run();f=-1,t=s.length}u=null,c=!1,clearTimeout(n)}}function i(n,t){this.fun=n,this.array=t}function o(){}var u,a=n.exports={},s=[],c=!1,f=-1;a.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];s.push(new i(n,t)),1!==s.length||c||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(n){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(n){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}}]);
//# sourceMappingURL=1f2088e4f3b83ed69b6f.sharedworker.js.map